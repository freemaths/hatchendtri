(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(37)},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),s=a.n(l),o=a(7),c=a(1),i=a(2),u=a(4),m=a(3),p=a(5),h=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"lines",value:function(e){if("string"!==typeof e)return e;var t=0;return e.split("\n").map(function(e){return r.a.createElement("div",{key:t++},e)})}},{key:"render",value:function(){var e=this.props.save?r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.close,"data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",onClick:this.props.save,className:"btn btn-"+(this.props.del?"danger":"primary")},this.props.del?"Delete":"Save changes")):null,t=this.props.y?{position:"absolute",top:this.props.y+"px",zIndex:1}:{position:"absolute",zIndex:1};return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:this.props.close,"aria-hidden":"true"},"\xd7"),r.a.createElement("h4",{className:"modal-title"},this.props.title)),r.a.createElement("div",{className:"modal-body"},this.lines(this.props.body)),e)))}}]),t}(n.Component),d=a(10),f=a.n(d),v=a(18);a(32);function E(e,t,a,n){var r=!1;fetch(e,function(e,t){var a;a=e?{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","HET-Token":k.user?k.user.token:null,"HET-Env":JSON.stringify(Object({NODE_ENV:"production",PUBLIC_URL:""}))},method:"post",cache:"no-cache",body:JSON.stringify(e)}:{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","HET-Token":k.user?k.user.token:null,"HET-Env":JSON.stringify(Object({NODE_ENV:"production",PUBLIC_URL:""}))},method:"get",cache:"no-cache"};return a}(a)).then(function(t){return t.ok||(r=t.statusText),e.endsWith(".gz")||e.endsWith(".csv")?t.text():t.json()}).then(function(e){t&&t({error:r,data:e})}).catch(function(a){console.error(e,r),t&&t({error:a,data:{error:r||a.message}})})}var b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");b?(!function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):y(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):y(t,e)})}}function y(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}function N(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}var k=new(function(){function e(){var t=this;Object(c.a)(this,e),this.loadResults=function(){var e={2003:["Boys","F"],2019:["All"]};Object.keys(e).forEach(function(a){var n;e[a].forEach(function(e){t.get_csv(a+e,function(r){r.error?console.error("loadResults",a,e):(n=t.parseCSV(r,null,e),t.add_results(n,a),console.log("added",a,e,t.results),t.save_results())})})})},this.version=7,this.results=null,this.cache={},this.parent=null,this.vs=null,this.roles=null,this.admin=!1}return Object(i.a)(e,[{key:"serviceWorker",value:function(e,t){return this.parent=e,t?g({onUpdate:this.onUpdate,onSuccess:this.onSuccess}):N(),this}},{key:"error",value:function(e,t){E("/ajax",function(a){a.error?console.error("error",e,t):console.log("error",e,t)},{req:"error",error:e,info:t})}},{key:"get_versions",value:function(e){E("/ajax",function(t){t.error?console.error("error",t):t.data.versions?e(t.data.versions):console.error("get_versions")},{req:"versions"})}},{key:"get_volunteers",value:function(e){var t=this;E("/ajax",function(e){e.error?console.error("error",e):e.data?(e.data.files.forEach(function(e){"volunteers"===e.name?t.vs=w(e.file):t[e.name]=w(e.file)}),t.parent.setState({het:t})):console.error("get_volunteers")},{req:"files",files:["volunteers","roles"]})}},{key:"start",value:function(e,t,a){E("/ajax",function(n){n.error?console.error("start",n):console.log("start",e,t,a,n.data.swim)},{req:"start",lane:e,color:t,number:a})}},{key:"reset",value:function(){E("/ajax",function(e){e.error?console.error("reset",e):console.log("reset",e.data.lanes)},{req:"reset"})}},{key:"ready",value:function(e,t,a){E("/ajax",function(n){n.error?console.error("ready",n):console.log("ready",e,t,a)},{req:"ready",lane:e,color:t,number:a})}},{key:"lap",value:function(e,t){E("/ajax",function(a){a.error?console.error("lap",a):console.log("lap",e,t)},{req:"lap",lane:e,color:t})}},{key:"undo",value:function(e,t){E("/ajax",function(a){a.error?console.log("error",a):console.log("undo",e,t)},{req:"undo",lane:e,color:t})}},{key:"finish",value:function(e,t,a,n){E("/ajax",function(n){n.error?console.log("finish",n):console.log("finish",e,t,a,n.data.finish,n.data.laps)},{req:"finish",lane:e,color:t,number:a,laps:n})}},{key:"get_lanes",value:function(e,t){E("/ajax",function(e){e.error?console.error("get_lanes",e):t&&t(e.data.lanes)},{req:"lanes",lane:e})}},{key:"get_laps",value:function(e,t){E("/ajax",function(a){a.error?console.error("get_laps",a):(console.log("get_laps",e,a.data.laps),t&&t(a.data.laps))},{req:"laps",lane:e})}},{key:"get_csv",value:function(e,t){E("/ajax",function(a){a.error?console.error("error",a):a.data?a.data.files.forEach(function(e){t(e.file)}):console.error("get_csv",e)},{req:"files",files:[e],type:"csv"})}},{key:"req_login",value:function(e,t){this.user=this.vs.volunteers[e],this.parent.setState({het:this})}},{key:"save_vol",value:function(e){!e.id&&e.name?(e.id=Math.max.apply(Math,Object(v.a)(Object.keys(this.vs)))+1,this.vs[e.id]=e):!e.name&&e.id?delete this.vs[e.id]:this.vs[e.id]=e,E("/ajax",function(e){e.error&&console.error("error",e)},{req:"save",data:{volunteers:C(this.vs)}}),this.parent.setState({het:this})}},{key:"save_roles",value:function(e){this.roles=e,E("/ajax",function(e){e.error&&console.error("error",e)},{req:"save",data:{roles:C(this.roles)}}),this.parent.setState({het:this})}},{key:"save_results",value:function(){console.log("save_results",this.results),delete this.results.ts,E("/ajax",function(e){e.error&&console.error("error",e)},{req:"save",data:{results:C(this.results)}})}},{key:"get_competitors",value:function(e,t){var a=this;E("/ajax",function(n){n.error?(console.error("get_competitors",n),t&&t()):n.data?n.data.files.forEach(function(t){"competitors"===t.name&&(a.competitors=w(t.file),a.cs={},a.competitors.forEach(function(e){a.cs[e.n]=e})),e&&e()}):(console.error("get_competitors"),t&&t())},{req:"files",files:["competitors"]})}},{key:"save_competitors",value:function(e){this.competitors=e,E("/ajax",function(e){e.error&&console.error("error",e)},{req:"save",data:{competitors:C(this.competitors)}}),this.parent.setState({het:this})}},{key:"process",value:function(e){var t=this;this.vs={},e.volunteers.forEach(function(e){return t.vs[e.id]=JSON.parse(e.json)}),this.roles=JSON.parse(e.roles.json)}},{key:"get_results",value:function(){var e=this,t=0;this.results||(this.results=this.load_results(),this.results&&this.results.ts&&(t=this.results.ts,delete this.results.ts,this.parent.setState({het:this}))),this.results||E("/ajax",function(a){a.error?console.error("error",a):a.data.files&&a.data.files.length?(a.data.files.forEach(function(t){t.file&&(e[t.name]=w(t.file),console.log(t.name,"updated"),e[t.name].ts=t.ts)}),e.results&&e.results.ts&&(e.store(e.results),delete e.results.ts,e.parent.setState({het:e}))):console.log("get-results","no updates",t)},{req:"files",files:["results"],ts:0})}},{key:"onUpdate",value:function(e){this.parent.setState({ready:!1,message:{type:"danger",text:"Software Updating - page will reload"}}),setTimeout(function(){window.location.reload()},2e3)}},{key:"onSuccess",value:function(e){this.parent.setState({type:"success",text:"Content is cached for offline use."}),this.ready()}},{key:"parseCSV",value:function(e,t,a,n){for(var r=e.split(/\r\n|\n/).map(function(e){return e.replace(/"([^,]*), ([^,]*)"/,"$2 $1").replace(/"/g,"").split(",")}),l=r[0],s=0;s<l.length;s++)"Position"===l[s]&&(l[s]="Pos"),"Athlete Name"!==l[s]&&"First"!==l[s]||(l[s]="Name"),"Cycle"===l[s]&&(l[s]="Bike"),"Gender"===l[s]&&(l[s]="MF"),"Class"===l[s]&&(l[s]="Cat"),"Gun Time"!==l[s]&&"Time"!==l[s]||(l[s]="Total"),"Bib"!==l[s]&&"Bib #"!==l[s]&&"Race No"!==l[s]||(l[s]="#"),"Category"===l[s]&&(l[s]="Cat");t||(t=[]),r.shift();var o=l.indexOf("Total"),c=!1;return a.endsWith("M")?c="M":a.endsWith("F")&&(c="F"),r.forEach(function(e){var r={};if(e.length===l.length&&1*e[0]>0&&"Not started"!==e[o]){for(var s=0;s<e.length;s++)e[s].length<30&&"#VALUE!"!==e[s]?r[l[s]]=e[s]:r[l[s]]="n/a";var i={X:"T1",Y:"T2",Z:"T3",1:"T1",2:"T2",3:"T3",T1:"T1",T2:"T2",T3:"T3",TS1:"T1",TS2:"T2",TS3:"T3","Tristars Start":"TS","Tristars 1":"T1","Tristars 2":"T2","Tristars 3":"T3","Tristar 1":"T1","Tristar 2":"T2","Tristar 3":"T3",Y15:"Y",Y16:"Y",Y17:"Y","M17-18":"Y",M1718:"Y","F17-18":"Y",F1718:"Y","17-19":"Y",1719:"Y",M1919:"Y",F1919:"Y",Youth:"Y",Youths:"Y",YOU:"Y",YTH:"Y",A:"Y",B:"Y",C:"Y",AY:"Y",BY:"Y",CY:"Y",Y1:"Y","Y-A":"Y","Y-B":"Y","Y-C":"Y","S-1":"S1","S-2":"S2","S-3":"S3","S-4":"S4","16-19":"Y","20-24":"S1","25-29":"S2","30-34":"S3","35-39":"S4",1619:"Y",2024:"S1",2529:"S2",3034:"S3",3539:"S4",M1619:"Y",M2024:"S1",M2529:"S2",M3034:"S3",M3539:"S4",F1619:"Y",F2024:"S1",F2529:"S2",F3034:"S3",F3539:"S4","M16-19":"Y","M20-24":"S1","M25-29":"S2","M30-34":"S3","M35-39":"S4","F16-19":"Y","F20-24":"S1","F25-29":"S2","F30-34":"S3","F35-39":"S4",D:"S1",E:"S2",F:"S3",G:"S4","S-D":"S1","S-E":"S2","S-F":"S3","S-G":"S4","M40-44":"V1","M45-49":"V2","M50-54":"V2","M55-59":"V3","M60-64":"V3","M65+":"V4","F40-44":"V1","F45-49":"V2","F50-54":"V2","F55-59":"V3","F60-64":"V3","F65+":"V4",M4044:"V1",M4549:"V2",M5054:"V2",M5559:"V3",M6064:"V3",M6569:"V4",M8099:"V4",F4044:"V1",F4549:"V2",F5054:"V2",F5559:"V3",F6064:"V3",F6569:"V4",F8099:"V4","40-44":"V1","45-49":"V2","50-54":"V2","55-59":"V3","60-64":"V3","65-69":"V4","65+":"V4",6099:"V4","80-84":"V4",4044:"V1",4549:"V2",5054:"V2",5559:"V3",6064:"V3",6569:"V4",H:"V1",V:"V2",VV:"V3",VVV:"V4",I:"V2",J:"V3",K:"V4","V-H":"V1","V-I":"V2","V-J":"V3","V-K":"V4"};r.MF?"Male"===r.MF||"male"===r.MF||"m"===r.MF?r.MF="M":"Female"!==r.MF&&"female"!==r.MF&&"f"!==r.MF||(r.MF="F"):c?r.MF=c:r.Cat&&r.Cat.startsWith("M")?r.MF="M":r.Cat&&r.Cat.startsWith("F")&&(r.MF="F");r.Cat?"M16-19"===r.Cat&&"All"===a?r.Cat="SY":r.Cat=i[r.Cat]?i[r.Cat]:r.Cat:r.Cat={TS:"TS",T1:"T1",T2:"T2",T3:"T3",Y:"Y",Y_:"Y"}[a.substr(0,2)],"Y"===r.Cat&&a.startsWith("A")&&"All"!==a&&(r.Cat="SY"),"NULL"===r.Club&&(r.Club=""),r.Family&&(r.Name+=" "+r.Family),["Swim","Bike","Run","Total","T1","T2"].forEach(function(e){-1!==["99:99:99","cnc","n/a","DNF","Started","DNC"].indexOf(r[e])&&(r[e]="")}),"n/a"===r.Club&&(r.Club=""),"999999"!==r.Pos&&"NP"!==r.Pos&&""!==r.Total||(r.Pos="DNF"),r.Total&&"DNF"===r.Pos&&(r.Total="DNF"),n&&(r.Club=n[r["#"]]?n[r["#"]]:""),r.Total||r.Swim||r.Bike||r.Run?t.push(r):console.log("parse error",r)}}),t}},{key:"store_results",value:function(e){var t;if(window.localStorage)try{t=this.compress(e),window.localStorage.setItem("HETresults",t),console.log("results stored",t.length)}catch(a){console.error("results not stored",a.name,t)}}},{key:"store",value:function(e){var t;if(window.localStorage)try{t=C(e),window.localStorage.setItem("HETresults",t),console.log("results stored",t.length)}catch(a){console.error("results not stored",a.name,t)}}},{key:"clear_results",value:function(){window.localStorage&&window.localStorage.removeItem("HETresults")}},{key:"load_results",value:function(){if(window.localStorage&&window.localStorage.HETresults)try{var e=window.localStorage.getItem("HETresults");this.results=w(e)}catch(t){console.error("failed to unzip results from localStorage",t),window.localStorage.removeItem("HETresults"),this.results=null}return this.results}},{key:"save",value:function(e){var t=window.localStorage.getItem("HETresults");E("/ajax/save.php",function(a){console.log("saved",t.length,a),e&&e()},{results:t})}},{key:"add_results",value:function(e,t){var a,n=this.results?this.results:{},r=["Pos","Name","MF","Cat","Total","Swim","Bike","Run"];"string"===typeof e[0].Club&&r.push("Club"),"string"===typeof e[0].T1&&(r.push("T1"),r.push("T2")),n[t]||(n[t]=[r]),e.forEach(function(e){a=[],r.forEach(function(t){"string"===typeof e[t]&&a.push(e[t])}),n[t].push(a)}),console.log("add_results",n)}}]),e}()),j={};function S(e){if(j[e]?j[e].n++:(j[e]={n:1},Object.keys(j).forEach(function(t){t!==e&&e.startsWith(t)&&j[t].show&&(j[e].show=!0)})),j[e].show)return!0}function O(e){return e===Object(e)?JSON.parse(JSON.stringify(e)):e}function C(e){var t=btoa(f.a.deflate(JSON.stringify(e),{to:"string"}));return S("zip")&&console.log("zip",e,JSON.stringify(e).length,t.length),t}function w(e){var t=JSON.parse(f.a.inflate(atob(e),{to:"string"}));return S("unzip")&&console.log("unzip",t,JSON.stringify(t).length,e.length),t}var T=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(!this.props.data)return null;var e={},t=0,a=[],n={},l={};this.props.data.forEach(function(r){var s=[],o=r.adult?r.adult.split(" ")[0]:null;o&&"none"!==o||(o=r.junior?r.junior.split(" ")[0]:null),Object.keys(r).filter(function(e){return-1===["whatsapp","id","key","role","admin"].indexOf(e)}).forEach(function(a){e[a]||0===e[a]||(e[a]=t++),s[e[a]]=r[a],"email"===a&&r[a]&&(n[r[a]]=r[a],o&&(l[o]||(l[o]={}),l[o][r[a]]=r[a]))}),a.push(s)});var s=[];return Object.keys(e).forEach(function(t){return s[e[t]]=t.charAt(0).toUpperCase()+t.slice(1)}),a.unshift(s),(n=Object.keys(n).join(";"))&&a.push(["All",n]),Object.keys(l).forEach(function(e){return a.push([e,Object.keys(l[e]).join(";")])}),r.a.createElement("div",null,"disabled")}}]),t}(n.Component);function x(e){return e||""}var F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={vid:null,race:"adult",update:!1,roles:!1,vol:!1,role:null,name:"",admin:!1},a.showRole=function(e,t){a.setState({role:{x:e.nativeEvent.pageX,y:e.nativeEvent.pageY,r:t}})},a.code=function(e){"H20e19"===e.target.value&&(a.setState({admin:!0,name:""}),k.admin=!0)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){k.get_volunteers()}},{key:"render",value:function(){var e=this;if(!k.vs)return null;var t={},a={};k.roles.sections.forEach(function(e){return e.roles.forEach(function(a){return t[e.name+" "+a.role]={adult:[],junior:[]}})}),Object.keys(k.vs).map(function(e){return k.vs[e]}).forEach(function(e){e.adult&&"none"!==e.adult&&(t[e.adult]?t[e.adult].adult.push(e.id):console.log("Adult role missing:",e.adult,e.name),a[e.id]||(a[e.id]=e)),e.junior&&"none"!==e.junior&&(t[e.junior]?t[e.junior].junior.push(e.id):console.log("Junior role missing:",e.junior,e.name),a[e.id]||(a[e.id]=e))}),k.roles.sections.forEach(function(e){if(!a[e.lead]){var t=O(k.vs[e.lead]);t.adult=t.junior=e.name+" Lead",a[e.lead]=t}});var n=1;a=k.admin&&!this.state.csv?k.vs:a;var l=Object.keys(a).filter(function(t){return e.state.name.length>0&&a[t].name.toLowerCase().indexOf(e.state.name.toLowerCase())>-1}).map(function(t){return r.a.createElement("div",{className:"row",key:n++},r.a.createElement("span",{onClick:function(){return e.setState({vid:t,update:!0})},className:"btn-link col-md-3"},a[t].name),r.a.createElement("span",{className:"col-md-3"},r.a.createElement("b",null,"Adult:")," ",a[t].adult),r.a.createElement("span",{className:"col-md-3"},r.a.createElement("b",null,"Junior:")," ",a[t].junior))}),s=[],o=this.state.race,c=0;k.roles.sections.forEach(function(a){s.push(r.a.createElement("tr",{key:c++},r.a.createElement("th",null,a.name," (",a.start[o],"-",a.end[o],")"),r.a.createElement("th",null,a.lead>0?"Lead":""),r.a.createElement("th",null,-1!==a.lead?k.vs[a.lead].name:""))),a.roles.forEach(function(n){for(var l=t[a.name+" "+n.role][o].length>n.qty[o].min?t[a.name+" "+n.role][o].length:n.qty[o].min,i=function(){var l=null,i=t[a.name+" "+n.role][o].length>u?t[a.name+" "+n.role][o][u]:-1;-1!==i&&(l=k.vs[i]);var m=n.role;n.notes&&(m=r.a.createElement("span",{className:"btn-link",onClick:function(t){return e.showRole(t,n)}},m)),s.push(r.a.createElement("tr",{key:c++},r.a.createElement("td",null),r.a.createElement("td",null,m),r.a.createElement("td",{style:i>0?{color:"#007ba7"}:null},l?r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({vid:l.id,update:!0})}},l.name):"")))},u=0;u<l;u++)i()})});var i;return i=r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{onChange:function(t){return e.setState({name:t.target.value})},type:"text",className:"form-control",id:"Name",value:this.state.name,placeholder:"Name"})),k.admin?r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-3"},r.a.createElement(G,{set_volunteer:function(t){return e.setState({vid:t})},filter:this.state.name,vid:this.state.volunteer,vs:k.vs})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{onClick:function(){return e.setState({vol:!0})},type:"button",className:"btn btn-primary form-control"},"Add Volunteer")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{type:"button",onClick:function(){return e.setState({roles:!0})},className:"btn btn-default form-control"},"Edit Roles")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{type:"button",onClick:function(){return e.setState({csv:!0})},className:"btn btn-default form-control"},"CSV"))):"?"===this.state.name?r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{onChange:this.code,autoFocus:!0,type:"password",className:"form-control",id:"Code",placeholder:"Code"})):null),k.admin&&this.state.csv?r.a.createElement(T,{filename:"volunteers.csv",close:function(){return e.setState({csv:null})},data:Object.keys(a).map(function(e){return a[e]})}):r.a.createElement("div",null,this.state.vid&&k.admin?r.a.createElement(V,{alloc:t,vid:this.state.vid,close:function(){return e.setState({vid:null})}}):null,this.state.roles?r.a.createElement(A,{close:function(){return e.setState({roles:!1})}}):null,r.a.createElement(_,{show:this.state.vol,save:this.newVolunteer,close:function(){return e.setState({vol:!1})}}),r.a.createElement(M,{role:this.state.role,close:function(){return e.setState({role:null})}}),r.a.createElement("div",null,r.a.createElement("form",{className:"form-horizontal",onSubmit:this.login},i,l?r.a.createElement("div",null,l,r.a.createElement("br",null)):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-1 control-label"},"Race:"),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Y,{set_race:function(t){return e.setState({race:t})}})))),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Section"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,s))))}}]),t}(n.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.role&&this.props.role.r.notes?r.a.createElement(h,{x:this.props.role.x,y:this.props.role.y,title:this.props.role.r.role,body:this.props.role.r.notes,close:this.props.close}):null}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={v:{name:"",email:""}},a.update=function(e,t){var n=a.state.v;n[e]=t,a.setState({v:n})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({v:{name:"",email:""}})}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(){return k.save_vol(e.state.v)},className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Name"},"Name:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("name",t.target.value)},type:"text",className:"form-control",id:"Name",value:this.state.v.name,placeholder:"Name"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Email"},"Email:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("email",t.target.value)},type:"email",className:"form-control",id:"Email",value:this.state.v.email,placeholder:"Email"})))));return r.a.createElement(h,{save:function(){k.save_vol(e.state.v),e.props.close()},title:"Volunteer",body:t,close:this.props.close})}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={v:O(k.vs[a.props.vid])},a.update=function(e,t){var n=a.state.v;"adult"!==e&&"junior"!==e||"any"!==t?n[e]=t:n[e]&&delete n[e],a.setState({v:n})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;console.log("Details",this.props.vid);var t=null;k.admin&&(t=r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Adult"},"Adult Role:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(R,{alloc:this.props.alloc,onChange:function(t){return e.update("adult",t.target.value)},roles:k.roles,v:this.state.v,race:"adult"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Junior"},"Junior role:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(R,{alloc:this.props.alloc,onChange:function(t){return e.update("junior",t.target.value)},roles:k.roles,v:this.state.v,race:"junior"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Admin"},"Admin:"),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("input",{onChange:function(t){return e.update("admin",!e.state.v.admin)},type:"checkbox",className:"form-control",id:"WhatsApp",checked:x(this.state.v.admin)})))));var a=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.save,className:"form-horizontal"},t,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Name"},"Name:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("name",t.target.value)},type:"text",className:"form-control",id:"Name",value:this.state.v.name,placeholder:"Name"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Email"},"Email:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("email",t.target.value)},type:"email",className:"form-control",id:"Email",value:this.state.v.email,placeholder:"Email"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Mobile"},"Mobile:"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{onChange:function(t){return e.update("mobile",t.target.value)},type:"tel",className:"form-control",id:"Mobile",value:x(this.state.v.mobile),placeholder:"Mobile"})),r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"WhatsApp"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-whatsapp",style:{fontSize:"large",color:"limegreen"}}),"\xa0WhatsApp")),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("input",{onChange:function(t){return e.update("whatsapp",!e.state.v.whatsapp)},type:"checkbox",className:"form-control",id:"WhatsApp",checked:x(this.state.v.whatsapp)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Notes"},"Notes:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("textarea",{onChange:function(t){return e.update("notes",t.target.value)},rows:"4",className:"form-control",value:x(this.state.v.notes)})))));return r.a.createElement(h,{del:!this.state.v.name,save:function(){return k.save_vol(e.state.v)},title:"Update Details",body:a,close:this.props.close})}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={roles:O(k.roles),section:null,role:null,add:!1},a.addRole=function(e){var t={role:e,id:a.state.section.roles.length,qty:{adult:{min:0,max:0},junior:{min:0,max:0}},section:a.state.section.id},n=a.state.roles;n.sections[a.state.section.id].roles.push(t),a.setState({roles:n})},a.deleteRole=function(){var e=a.state.roles;e.sections[a.state.section.id].roles.splice(a.state.role.id,1),a.setState({roles:e,role:null})},a.change=function(e,t,n,r,l){var s=a.state.section;if("s"===t)l?s[n][r][l]=e:r?s[n][r]=e:s[n]=e;else{var o=a.state.role;l?(o[n][r][l]=e,"min"===l&&1*o[n][r].max<1*e?o[n][r].max=e:"max"===l&&1*o[n][r].min>1*e&&(o[n][r].min=e)):r?o[n][r]=e:o[n]=e}a.setState({section:s})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.section?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"roles"},"Role:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(D,{section:this.state.section,role:this.state.role,onChange:function(t){return e.setState({role:e.state.section.roles[t.target.value],add:!1})},roles:this.state.role})),r.a.createElement("div",{className:"col-md-2"},this.state.role?r.a.createElement("button",{type:"button",onClick:this.deleteRole,className:"btn btn-default form-control"},"Delete"):r.a.createElement("button",{type:"button",onClick:function(){return e.setState({add:!0})},className:"btn btn-default form-control"},"Add"))):null,a=this.state.section?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Lead:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(G,{vid:this.state.section.lead,set_volunteer:function(t){return e.change(t,"s","lead")},vs:this.props.vs}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Adult Start/End:"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:this.state.section.start.adult,onChange:function(t){return e.change(t.target.value,"s","start","adult")},className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:this.state.section.end.adult,onChange:function(t){return e.change(t.target.value,"s","end","adult")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Junior Start/End:"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:x(this.state.section.start.junior),onChange:function(t){return e.change(t.target.value,"s","start","junior")},className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:x(this.state.section.end.junior),onChange:function(t){return e.change(t.target.value,"s","end","junior")},className:"form-control"})))):null,n=this.state.role?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Name:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{value:this.state.role.role,onChange:function(t){return e.change(t.target.value,"r","role")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Adult Min/Max:"),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.adult.min,onChange:function(t){return e.change(t.target.value,"r","qty","adult","min")},className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.adult.max,onChange:function(t){return e.change(t.target.value,"r","qty","adult","max")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Junior Min/Max:"),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.junior.min,onChange:function(t){return e.change(t.target.value,"r","qty","junior","min")},className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.junior.max,onChange:function(t){return e.change(t.target.value,"r","qty","junior","max")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Notes"},"Notes:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("textarea",{onChange:function(t){return e.change(t.target.value,"r","notes")},rows:"4",className:"form-control",value:x(this.state.role.notes)})))):this.state.add?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Name:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{value:"",onChange:function(t){return e.addRole(t.target.value,"r","role")},className:"form-control"})))):null,l=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.save,className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"roles"},"Section:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(W,{section:this.state.section,onChange:function(t){return e.setState({section:e.state.roles.sections[t.target.value],role:null,addRole:!1})},roles:this.state.roles}))),a,t,n));return r.a.createElement(h,{save:function(){return k.save_roles(e.state.roles)},title:"Edit Roles",body:l,close:this.props.close})}}]),t}(n.Component),Y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("select",{className:"form-control",value:this.props.race,onChange:function(t){return e.props.set_race(t.target.value)}},r.a.createElement("option",{value:"adult"},"Adult"),r.a.createElement("option",{value:"junior"},"Junior"))}}]),t}(n.Component),G=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement("option",{key:0,value:0},"name")];return Object.keys(k.vs).map(function(e){return k.vs[e]}).filter(function(t){return!e.props.filter||-1!==t.name.toLowerCase().indexOf(e.props.filter.toLowerCase())}).sort(function(e,t){return e.name.localeCompare(t.name)}).forEach(function(e){t.push(r.a.createElement("option",{key:e.id,value:e.id},e.name))}),r.a.createElement("select",{className:"form-control",value:this.props.vid?this.props.vid:0,onChange:function(t){return e.props.set_volunteer(t.target.value)}},t)}}]),t}(n.Component),R=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.v,a=t[this.props.race]?t[this.props.race]:"any",n=[r.a.createElement("option",{key:0,value:"any"},"any"),r.a.createElement("option",{key:-1,value:"none"},"none")];return this.props.roles.sections.forEach(function(t){t.roles.forEach(function(a){e.props.alloc[t.name+" "+a.role][e.props.race].length<a.qty[e.props.race].max?n.push(r.a.createElement("option",{key:t.id+"_"+a.id},t.name," ",a.role)):n.push(r.a.createElement("option",{className:"green",key:t.id+"_"+a.id},t.name," ",a.role))})}),r.a.createElement("select",{className:"form-control",value:a,onChange:this.props.onChange},n)}}]),t}(n.Component),W=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"select"},"select")];return k.roles.sections.forEach(function(t){e.push(r.a.createElement("option",{key:t.id,value:t.id},t.name))}),r.a.createElement("select",{className:"form-control",value:this.props.section?this.props.section.id:"select",onChange:this.props.onChange},e)}}]),t}(n.Component),D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"select"},"select")];return this.props.section.roles.forEach(function(t){e.push(r.a.createElement("option",{key:t.id,value:t.id},t.role))}),r.a.createElement("select",{className:"form-control",value:this.props.role?this.props.role.id:"select",onChange:this.props.onChange},e)}}]),t}(n.Component),q=F,J=a(8),B=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[];if(this.props.data){var t=[],a=0,n=0;return this.props.data.sort(function(e,t){return e.n-t.n}).forEach(function(l){e.push(r.a.createElement("div",{className:"label",key:a++},r.a.createElement("div",{className:"big"},l.forename," ",l.surname),r.a.createElement("div",{className:"huge"},l.n),l.ageGroup,r.a.createElement("br",null),l.start)),14===a&&(e.push(r.a.createElement("div",{key:a++,className:"page-break"})),t.push(r.a.createElement("div",{key:n++,className:"page"},e)),a=0,e=[])}),0!==a&&t.push(r.a.createElement("div",{key:n++,className:"page"},e)),r.a.createElement("div",null,t)}for(var l=0;l<14;l++)e.push(r.a.createElement("div",{className:"label",key:l},"Use foot covers to keep feet clean",r.a.createElement("br",null),"prior to swimming.",r.a.createElement("br",null),"Pin numbers to t-shirt front and back.",r.a.createElement("br",null),"Stick numbers on helmet and bike.",r.a.createElement("br",null),"Strap timing chip to left ankle."));return r.a.createElement("div",null,e)}}]),t}(n.Component);function H(e){var t=e.split(":"),a=Object(J.a)(t,3),n=a[0],r=a[1],l=a[2];return 1*n>0?60*n+1*r:60*r+1*l}function L(e){return e>720?720:e}function P(e,t){var a=[24e3,24900,25800,27e3,28200,29700],n={"Tristars Start":"11:10","Tristars 1":"11:20","Tristars 2":"11:40","Tristars 3":"12:10",Youths:"12:40"};if(n[e])return n[e];for(var r=a.length-1;t-900+25200<a[r]&&r>0;)r--;return function(e){var t=Math.floor(e/3600);return t+":"+Math.floor((e-3600*t)/60)}(a[r])}var I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={filter:"",sex:"?",ageGroup:"",scheduled:!1},a.parseComps=function(e){for(var t=[],n=e.split(/\r\n|\n/).map(function(e){return e.replace(/"([^,]*), ([^,]*)"/,"$2 $1").replace(/"/g,"").split(",")}),r=n[0],l={Forename:"forename",Surname:"surname",Gender:"gender",Club:"club",Estimated_400m_swim_time:"swim",AgeGroup:"ageGroup","400m_swim_time":"swim","300m_swim_time":"swim","200m_swim_time":"swim","100m_swim_time":"swim",Estimated_50m_swim_time:"swim"},s=1;s<n.length;s++){for(var o={},c=0;c<r.length;c++)l[r[c]]&&n[s][c]&&(o[l[r[c]]]=n[s][c]);o.swim?("00:00:01"!==o.swim&&"0:00:01"!==o.swim||(o.swim="0:10:01"),t.push(o)):console.log("parseComps E",o)}return a.schedule(t,{}),a.setState({cs:t}),k.save_competitors(t),null},a.schedule=function(e,t){var n=[{i:0,t:0,max:0},{i:0,t:0,max:0},{i:0,t:0,max:0}],r="",l=201;e.sort(function(e,t){return a.sort(t,e)}).forEach(function(e){if(e.ageGroup.startsWith("M")||e.ageGroup.startsWith("F"))t[e.ageGroup]||(t[e.ageGroup]=e.ageGroup);else if(r!==e.ageGroup){r=e.ageGroup;var a={"Tristars Start":16200,"Tristars 1":16800,"Tristars 2":18e3,"Tristars 3":19800,Youths:21600};a[e.ageGroup]&&(n=[{i:0,t:a[e.ageGroup],max:0},{i:0,t:a[e.ageGroup],max:0},{i:0,t:a[e.ageGroup],max:0}],l={"Tristars Start":1,"Tristars 1":41,"Tristars 2":101,"Tristars 3":151,Youths:21}[e.ageGroup])}var s=-1;n[0].i<6&&(0===n[0].i&&(n[0].max=L(H(e.swim))),n[0].i++,s=n[0].t),-1===s&&(s=(n=n.sort(function(e,t){return e.t+e.max-t.t-t.max}))[0].t+n[0].max+60,n[0].t=s,n[0].i=1,n[0].max=L(H(e.swim))),e.briefing=P(e.ageGroup,s),e.start=function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=(t+7<10?"0"+(t+7):t+7)+":"+(a<10?"0"+a:a);return n.startsWith("09:0")?n="08:59":"12:02"===n&&(n="11:59"),n}(s),e.n=l++})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.get_competitors(function(){return e.setState({cs:k.competitors})},function(){return k.get_csv("competitors",function(t){return e.parseComps(t)})})}},{key:"filter",value:function(e){return("?"===this.state.sex||e.gender.startsWith(this.state.sex))&&(""===this.state.ageGroup||e.ageGroup===this.state.ageGroup||"Adult"===this.state.ageGroup&&(e.ageGroup.startsWith("M")||e.ageGroup.startsWith("F")))&&(0===this.state.filter.length||-1!==(e.forename.toLowerCase()+" "+e.surname.toLowerCase()).indexOf(this.state.filter.toLowerCase()))}},{key:"sort",value:function(e,t){var a=0,n={"Tristars Start":4,"Tristars 1":3,"Tristars 2":2,"Tristars 3":1,Youths:"0"},r=n[e.ageGroup]?n[e.ageGroup]:5,l=n[t.ageGroup]?n[t.ageGroup]:5;if(r-l!==0)a=r-l;else{var s=H(e.swim),o=H(t.swim);a=s!==o?s-o:(e.forename+" "+e.surname).localeCompare(t.forename+" "+t.surname)}return a}},{key:"sortN",value:function(e,t){var a={"Tristars Start":1,"Tristars 1":2,"Tristars 2":3,"Tristars 3":4,Youths:5},n=a[e.ageGroup]?a[e.ageGroup]:0,r=a[t.ageGroup]?a[t.ageGroup]:0;return n-r!==0?n-r:e.n-t.n}},{key:"render",value:function(){var e=this;if(!this.state.cs)return null;var t=0,a=O(this.state.cs),n={},l=a.filter(function(t){return e.filter(t)}).sort(function(t,a){return e.sortN(t,a)}).map(function(a){n[a.ageGroup]||!a.ageGroup.startsWith("M")&&!a.ageGroup.startsWith("F")||(n[a.ageGroup]=a.ageGroup);var l=k.admin?r.a.createElement("a",{href:".",onClick:function(t){t.preventDefault(),e.setState({c:a,y:t.nativeEvent.pageY})}},a.n):a.n;return r.a.createElement("tr",{key:t++},r.a.createElement("td",null,l),r.a.createElement("td",null,a.forename),r.a.createElement("td",null,a.surname),r.a.createElement("td",null,a.gender),r.a.createElement("td",null,a.ageGroup),r.a.createElement("td",null,a.briefing),r.a.createElement("td",null,a.start))});return k.admin&&this.state.csv?r.a.createElement(T,{filename:"competitors.csv",close:function(){return e.setState({csv:null})},data:this.state.cs}):k.admin&&this.state.labels?r.a.createElement(B,{close:function(){return e.setState({labels:null})}}):r.a.createElement("div",null,k.admin?r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("button",{type:"button",onClick:function(){return e.setState({csv:!0})},className:"btn btn-default form-control"},"CSV"),r.a.createElement("button",{type:"button",onClick:function(){e.props.nav(!1),e.setState({labels:!0})},className:"btn btn-default form-control"},"Labels")):null,r.a.createElement(U,{y:this.state.y,c:this.state.c,save:this.save,close:function(){return e.setState({c:null})}}),r.a.createElement("form",{className:"form-horizontal",onSubmit:this.login},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-1 control-label"},"Name:"),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("input",{type:"text",size:"10",className:"form-control",onChange:function(t){return e.setState({filter:t.target.value})}})),r.a.createElement("label",{className:"col-sm-1 control-label"},"M/F:"),r.a.createElement("div",{className:"col-sm-2"},r.a.createElement(X,{mf:this.state.sex,onChange:function(t){return e.setState({sex:t.target.value})}})),r.a.createElement("label",{className:"col-sm-2 control-label"},"Age Group:"),r.a.createElement("div",{className:"col-sm-2"},r.a.createElement(z,{groups:n,ageGroup:this.state.ageGroup,onChange:function(t){return e.setState({ageGroup:t.target.value})}})))),r.a.createElement("div",null,l.length," Competitors"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Forename"),r.a.createElement("th",null,"Surname"),r.a.createElement("th",null,"Gender"),r.a.createElement("th",null,"Age Group"),r.a.createElement("th",null,"Briefing"),r.a.createElement("th",null,"Start"))),r.a.createElement("tbody",null,l)))}}]),t}(n.Component),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={c:a.props.c},a.update=function(e,t){a.state.c[e]=t,a.setState({c:t})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({c:e.c})}},{key:"render",value:function(){var e=this;if(!this.props.c)return null;var t=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.save,className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"FirstName"},"Forename:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("forename",t.target.value)},type:"text",className:"form-control",value:this.state.c.forename,placeholder:"Forename"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"FirstName"},"Surname:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("surname",t.target.value)},type:"text",className:"form-control",value:this.state.c.surname,placeholder:"Surname"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Email"},"Swim:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("swim",t.target.value)},type:"text",className:"form-control",value:this.state.c.swim,placeholder:"Swim"})))));return r.a.createElement(h,{y:this.props.y,save:function(){return e.props.save(e.state.c)},title:"Update Details",body:t,close:this.props.close})}}]),t}(n.Component),z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"select",value:""},"select"),r.a.createElement("option",{key:"s"},"Tristars Start"),r.a.createElement("option",{key:"1"},"Tristars 1"),r.a.createElement("option",{key:"2"},"Tristars 2"),r.a.createElement("option",{key:"3"},"Tristars 3"),r.a.createElement("option",{key:"4"},"Youths"),r.a.createElement("option",{key:"5"},"Adult")];return Object.keys(this.props.groups).sort(function(e,t){return e.localeCompare(t)}).forEach(function(t){return e.push(r.a.createElement("option",{key:t},t))}),r.a.createElement("select",{type:"button",className:"form-control",value:this.props.ageGroup?this.props.ageGroup:"",onChange:this.props.onChange},e)}}]),t}(n.Component),X=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"?"},"?"),r.a.createElement("option",{key:"M"},"M"),r.a.createElement("option",{key:"F"},"F")];return r.a.createElement("select",{type:"button",className:"form-control",value:this.props.mf?this.props.mf:"?",onChange:this.props.onChange},e)}}]),t}(n.Component),$=I,K=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=["Adult","Tristars Start","Tristars 1","Tristars 2","Tristars 3","Youths"],t=["6:10","8:00"],a=["9:30","11:00"],n=["6:15","8:15"],l=["10:30","11:30"],s={a:["6:40","6:55","7:10","7:30","7:50","8:15"],j:["11:10","11:20","11:40","12:10","12:40"]};return r.a.createElement("div",null,r.a.createElement("h2",null,"Details"),r.a.createElement("p",null,"The adult race includes a 400m pool based swim (17 lengths at ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.everyoneactive.com/centre/hatch-end-swimming-pool/"},"Hatch End swimming pool"),") followed by a 17km road based cycle (3 laps) and an off-road 3km run (3 laps at Hatch End playing fields). Junior races cycle on the playing fields rather than the roads with age-appropriate adjustments to distances (see table below)."),r.a.createElement("p",null,"Documents:"," ",r.a.createElement("a",{target:"_blank",href:"/docs/AdultBriefing.pdf"},"Adult Race Briefing"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/JuniorBriefing.pdf"},"Junior Race Briefing"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/AdultCycleMap.pdf"},"Adult Cycle Course"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/AdultRunCourse.pdf"},"Adult Run Course"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/JuniorRaceCourses.pdf"},"Junior Cycle & Run Courses")),r.a.createElement("p",null,"See also: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.jetstreamtri.com"},"Jetstream"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/NoviceGuide.pdf"},"Novice Guide"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/SiteMap.pdf"},"Site Map"),","," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.co.uk/maps/place/HA5+4EA"},"Local Map"),","," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.britishtriathlon.org/britain/documents/events/competition-rules/british-triathlon-competition-rules-2019.pdf"},"British Triathlon Rules")),r.a.createElement("h2",null,"Provisional Timings"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),e.map(function(e){return r.a.createElement("th",{style:{textAlign:"center"},key:e},e)}))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Registration"),r.a.createElement("td",{style:{textAlign:"center"}},t[0],"-",t[1]),r.a.createElement("td",{style:{textAlign:"center"},colSpan:e.length-1},a[0],"-",a[1])),r.a.createElement("tr",null,r.a.createElement("th",null,"Transition"),r.a.createElement("td",{style:{textAlign:"center"}},n[0],"-",n[1]),r.a.createElement("td",{style:{textAlign:"center"},colSpan:e.length-1},l[0],"-",l[1])),r.a.createElement("tr",null,r.a.createElement("th",null,"Briefing"),r.a.createElement("td",{style:{textAlign:"center"}},s.a.join(", ")),s.j.map(function(e){return r.a.createElement("td",{style:{textAlign:"center"},key:e},e)})),r.a.createElement("tr",null,r.a.createElement("th",null,"Start"),["7:00*","11:30","11:40","12:00","12:30","13:00"].map(function(e){return r.a.createElement("td",{style:{textAlign:"center"},key:e},e)})))),r.a.createElement("div",null,r.a.createElement("b",null,"*Individual adult start times")," are calculated from ",r.a.createElement("b",null,"estimated swim time")," and notified one week before the race."),r.a.createElement("h2",null,"Race Distances"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Age at 31/12/19"),r.a.createElement("th",{className:"text-center"},"Swim(lengths)"),r.a.createElement("th",{className:"text-center"},"Bike(laps)"),r.a.createElement("th",{className:"text-center"},"Run(laps)"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Adult - novice"),r.a.createElement("td",null,"400m(17)"),r.a.createElement("td",null,"17km(3)"),r.a.createElement("td",null,"3km(3)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Adult - experienced"),r.a.createElement("td",null,"400m(17)"),r.a.createElement("td",null,"17km(3)"),r.a.createElement("td",null,"3km(3)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Youths: 15-16 yrs"),r.a.createElement("td",null,"400m(17)"),r.a.createElement("td",null,"5km(5)"),r.a.createElement("td",null,"3km(5)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristar 3: 13-14 yrs"),r.a.createElement("td",null,"306m(13)"),r.a.createElement("td",null,"4km(4)"),r.a.createElement("td",null,"2.4km(4)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristar 2: 11-12 yrs"),r.a.createElement("td",null,"212m(9)"),r.a.createElement("td",null,"3km(3)"),r.a.createElement("td",null,"1.8km(3)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristar 1:  9-10 yrs"),r.a.createElement("td",null,"165m(7)"),r.a.createElement("td",null,"2km(2)"),r.a.createElement("td",null,"1.2km(2)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristart:   8 yrs"),r.a.createElement("td",null,"70m(3)"),r.a.createElement("td",null,"1km(1)"),r.a.createElement("td",null,"0.6km(1)")))))}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",year:"",cat:"",mf:"",n:"",sort:"Total"},a.cnum=function(e){var t={TS:1,T1:2,T2:3,T3:4,Y:5},n=t[e[a.c.Cat]]?t[e[a.c.Cat]]:6;return a.year<2004&n<5&&(n=4),n},a.ts=function(e){var t=a.c[a.state.sort]?e[a.c[a.state.sort]]:e[a.c.Total];if(!t)return 9999999;var n=t.split(":"),r=Object(J.a)(n,3),l=r[0],s=r[1],o=r[2],c=(l?3600*l:0)+60*s+1*o;return c||"DNF"===t||console.log("ts",e,l,s,o),c},a.compare=function(e,t){var n;return 0===(n=a.cnum(e)-a.cnum(t))&&(n=a.ts(e)-a.ts(t)),n},a.filter=function(e){for(var t,n,r=[],l=a.cols(e),s=1;s<k.results[e].length;s++){var o=k.results[e][s];(!o||a.state.year&&a.state.year!==e||a.state.mf&&a.state.mf!==o[l.MF]||a.state.cat&&-1===a.state.cat.indexOf("*")&&a.state.cat!==o[l.Cat]&&"Adult"!==a.state.cat&&"Junior"!==a.state.cat||"T*"===a.state.cat&&"T"!==o[l.Cat][0]||"Y*"===a.state.cat&&"Y"!==o[l.Cat][0]||"S*"===a.state.cat&&"S"!==o[l.Cat][0]||"V*"===a.state.cat&&"V"!==o[l.Cat][0]||"Adult"===a.state.cat&&"S"!==o[l.Cat][0]&&"V"!==o[l.Cat][0]||"Junior"===a.state.cat&&("S"===o[l.Cat][0]||"V"===o[l.Cat][0]))&&(o=!1),o&&r.push(o)}a.year=e,a.c=l,r=r.sort(a.compare);var c=[];return r.forEach(function(e){var r=null;a.cnum(e)!==n?t=1:t++,"DNF"!==e[l.Pos]&&(e[l.Pos]=t),n=a.cnum(e),""===a.state.name&&""===a.state.year&&""===a.state.cat&&""===a.state.mf&&""===a.state.n?r=1*e[l.Pos]===1?e:null:a.state.name?a.state.name.toLowerCase().split(",").forEach(function(t){t.length>0&&-1!==e[l.Name].toLowerCase().indexOf(t)&&(r=e),l.Club&&t.length>0&&-1!==e[l.Club].toLowerCase().indexOf(t)&&(r=e)}):r=a.state.n?1*e[l.Pos]<=a.state.n?e:null:e,r&&c.push(r)}),c},a.set=function(e,t){var n=a.state;n[e]=t.target?t.target.value:t,a.setState(n)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.het.get_results()}},{key:"round",value:function(e){var t=e,a=e.split(":"),n=Object(J.a)(a,3),r=n[0],l=n[1],s=n[2];return s&&(t=r+":"+l+":"+(s<9.5?"0":"")+Math.round(s)),t}},{key:"cols",value:function(e){var t={},a=0;return k.results[e][0].forEach(function(e){t[e]=a++}),t}},{key:"render",value:function(){var e=this;if(!k.results)return null;var t=0,a=0;return r.a.createElement("div",null,r.a.createElement("form",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement(Q,{nm:this.state.name,set:this.set}),r.a.createElement(ae,{year:this.state.year,set:this.set}),r.a.createElement(ee,{mf:this.state.mf,set:this.set}),r.a.createElement(te,{cat:this.state.cat,set:this.set}),r.a.createElement(ne,{n:this.state.n,set:this.set}))),Object.keys(k.results).reverse().map(function(n){var l=e.cols(n),s=a<100?e.filter(n):[];return a+=s.length,s.length>0?r.a.createElement("div",{key:t++},r.a.createElement("h3",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.set("year",e.state.year===n?"":n)}},n)),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Pos"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"M/F"),r.a.createElement("th",null,"Cat"),r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Total"})}},"Total "),"Total"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Swim"})}},"Swim "),"Swim"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),l.T1?r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"T1"})}},"T1 "),"T1"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null):null,r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Bike"})}},"Bike "),"Bike"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),l.T2?r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"T2"})}},"T2 "),"T2"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null):null,r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Run"})}},"Run "),"Run"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),l.Club?r.a.createElement("th",null,"Club"):null)),r.a.createElement("tbody",null,s.map(function(a){return r.a.createElement("tr",{key:t++},r.a.createElement("td",null,a[l.Pos]),r.a.createElement("td",null,a[l.Name]),r.a.createElement("td",null,a[l.MF]),r.a.createElement("td",null,a[l.Cat]),r.a.createElement("td",null,e.round(a[l.Total])),r.a.createElement("td",null,a[l.Swim]),l.T1?r.a.createElement("td",null,a[l.T1]):null,r.a.createElement("td",null,a[l.Bike]),l.T2?r.a.createElement("td",null,a[l.T2]):null,r.a.createElement("td",null,a[l.Run]),l.Club?r.a.createElement("td",null,a[l.Club]):null)})))):null}))}}]),t}(n.Component),Q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-4 col-xs-8"},r.a.createElement("input",{type:"text",size:"10",placeholder:"Name, ...",value:this.props.nm,className:"form-control",onChange:function(t){return e.props.set("name",t)}}))}}]),t}(n.Component),ee=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.mf,onChange:function(t){return e.props.set("mf",t)}},r.a.createElement("option",{value:""},"M/F"),r.a.createElement("option",{value:"M"},"M"),r.a.createElement("option",{value:"F"},"F")))}}]),t}(n.Component),te=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.cat,onChange:function(t){return e.props.set("cat",t)}},r.a.createElement("option",{value:""},"Cat"),["Junior","TS","T1","T2","T3","Y","Adult","S*","SY","S1","S2","S3","S4","V*","V1","V2","V3","V4"].map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(n.Component),ae=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.year,onChange:function(t){return e.props.set("year",t)}},r.a.createElement("option",{value:""},"Year"),["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2017","2018","2019"].reverse().map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(n.Component),ne=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.n,onChange:function(t){return e.props.set("n",t)}},r.a.createElement("option",{value:""},"#"),[1,3,5,10,20].map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(n.Component),re=Z,le=(a(33),{blue:"primary",yellow:"yellow",red:"danger",white:"default",black:"black",green:"success"});function se(e){var t=Math.floor(e/1e3),a=Math.floor(t/60);return(t-=60*a)<10&&(t="0"+t),a<10&&(a="0"+a),a+":"+t}function oe(e){var t=e?e.swim:null;return t&&(t.startsWith("0:")?t=t.substr(2):t.startsWith("00:")&&(t=t.substr(3))),t}var ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={laps:null,lane:null,lanes:null},a.setLane=function(e){var t=e.target.value,n={};Object.keys(le).forEach(function(e){return n[e]=[]}),"reset"===t?k.reset():"start"!==t&&k.get_laps(t,function(e){Object.keys(e).forEach(function(t){return e[t].forEach(function(e){return n[t].push(1e3*e)})}),a.setState({laps:n})}),a.setState({lane:t,laps:n,lanes:null})},a.update=function(){var e=Date.now();null!==a.state.lane&&k.competitors?k.get_lanes(a.state.lane,function(t){JSON.stringify(t)!==JSON.stringify(a.state.lanes)?(console.log("update",t),k.lanes=t,a.setState({lanes:t,ts:e})):"start"!==a.state.lane&&a.setState({ts:e})}):a.setState({ts:e})},a.lap=function(e){var t=a.state.laps,n=Date.now();t[e].push(n),k.lap(a.state.lane,e),a.setState({laps:t})},a.undo=function(e){var t=a.state.laps;t[e].pop(),k.undo(a.state.lane,e),a.setState({laps:t})},a.finish=function(e,t){var n=a.state.laps,r=Date.now();n[e].push(r),k.finish(a.state.lane,e,t?t.n:0,n[e]),n[e]=[],a.setState({laps:n})},a.last=function(e){return a.state.laps[e].length>1?se(a.state.laps[e][a.state.laps[e].length-1]-a.state.laps[e][a.state.laps[e].length-2]):null},a.average=function(e){return a.state.laps[e].length>2?se((a.state.laps[e][a.state.laps[e].length-1]-a.state.laps[e][0])/a.state.laps[e].length-1):null},a.total=function(e){return a.state.laps[e].length&&a.state.swim&&a.state.swim[e]&&a.state.swim[e].start?se(a.state.laps[e][a.state.laps[e].length-1]-1e3*a.state.swim[e].start):a.state.laps[e].length>1?se(a.state.laps[e][a.state.laps[e].length-1]-a.state.laps[e][0]):null},a.time=function(e){return a.state.laps[e].length?se(Date.now()-a.state.laps[e][a.state.laps[e].length-1]):a.state.lanes&&a.state.lanes[a.state.lane].swim&&a.state.lanes[a.state.lane].start?se(Date.now()-a.state.lanes[a.state.lane].start):void 0},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){k.competitors||k.get_competitors(),this.t=0,this.interval=setInterval(this.update,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"sort",value:function(e,t){var a=this.state.laps;if(!a[e].length&&!a[t].length&&this.state.lanes&&this.state.lanes[this.state.lane]){var n=this.state.lanes[this.state.lane].swim;return n[e]&&n[t]?n[e].start-n[t].start:n[e]?-1:n[t]?1:0}return a[e].length&&a[e].length===a[t].length?a[e][a[e].length-1]-a[t][a[t].length-1]:a[t].length-a[e].length}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("select",{className:"form-control inline",style:{width:"auto"},onChange:this.setLane},["lane",1,2,3,"start"].map(function(e){return r.a.createElement("option",{value:e,key:e},e)}),">"),r.a.createElement("br",null),r.a.createElement("br",null)),"start"===this.state.lane?r.a.createElement(ie,{lanes:this.state.lanes}):this.state.lane?Object.keys(le).sort(function(t,a){return e.sort(t,a)}).map(function(t){var a=null;return e.state.lanes&&e.state.lanes[e.state.lane]&&e.state.lanes[e.state.lane].swim[t]&&(a=k.cs[e.state.lanes[e.state.lane].swim[t].n]),r.a.createElement("div",{key:t},r.a.createElement("button",{onClick:function(){return e.lap(t)},className:"btn btn-lg btn-"+le[t]},e.state.laps[t].length?2*e.state.laps[t].length-1:0," ",e.time(t)),r.a.createElement("span",null," ",e.last(t)," "),r.a.createElement("button",{onClick:function(){return e.undo(t)},className:"btn btn-lg btn-default"},r.a.createElement("i",{className:"fa fa-undo"})),r.a.createElement("div",{className:"inline"},r.a.createElement("span",null," ",e.total(t)," "),r.a.createElement("br",null),r.a.createElement("span",null," ",e.average(t)," ")),r.a.createElement("button",{onClick:function(){return e.finish(t,a)},className:"btn btn-lg btn-default"},r.a.createElement("i",{className:"fa fa-stop"})),a?r.a.createElement("div",null,a.n," ",a.forename," ",oe(a)):r.a.createElement("div",null,r.a.createElement("br",null)))}):null)}}]),t}(n.Component),ie=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"sort",value:function(e,t,a){if(this.props.lanes&&this.props.lanes[a]){var n=this.props.lanes[a].laps,r=this.props.lanes[a].ready,l=this.props.lanes[a].swim;return n[e]||n[t]?n[e]||l[e]?n[t]||l[t]?(n[t]?n[t]:0)-(n[e]?n[e]:0):1:-1:l[e]||l[t]?l[e]?l[t]?0:1:-1:(r[t]?r[t]:0)-(r[e]?r[e]:0)}return 0}},{key:"render",value:function(){var e=this;return[1,2,3].map(function(t){return r.a.createElement("div",{key:t,className:"col-xs-4"},Object.keys(le).sort(function(a,n){return e.sort(a,n,t)}).map(function(a){return r.a.createElement(ue,{key:a,lane:t,color:a,lanes:e.props.lanes})}))})}}]),t}(n.Component),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={edit:!1,n:""},a.start=function(e){k.start(a.props.lane,a.props.color,e),a.setState({edit:!1,n:""})},a.ready=function(){if(k.cs&&a.state.n){var e=k.cs[a.state.n];e?k.ready(a.props.lane,a.props.color,e.n):k.ready(a.props.lane,a.props.color,0),a.setState({edit:!1})}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=0,a=!1,n=null;if(this.props.lanes&&this.props.lanes[this.props.lane]){var l=this.props.lanes[this.props.lane];l.ready[this.props.color]&&(n=k.cs[l.ready[this.props.color]]),l.laps[this.props.color]>0&&(t=2*l.laps[this.props.color]-1),l.swim[this.props.color]&&(a=!0)}return r.a.createElement("div",{style:{marginTop:5}},this.state.edit?r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.ready()}},r.a.createElement("input",{style:{width:"3em"},autoFocus:!0,inputMode:"numeric",placeholder:"#",value:this.state.n,type:"text",onChange:function(t){return e.setState({n:t.target.value})}})):r.a.createElement("button",{onClick:function(){a||!n?e.setState({edit:!0}):e.start(n.n)},className:"btn btn-lg btn-"+le[this.props.color]},a||t?t:n?r.a.createElement("i",{className:"fa fa-play"}):"?"),n?r.a.createElement("div",{onClick:function(){return e.setState({edit:!0})}},n.n," ",n.forename," ",oe(n)):r.a.createElement("div",null,r.a.createElement("br",null)))}}]),t}(n.Component),me=ce,pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={error:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0}),k(e,t)}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",null,"An error occurred. This is likely to be due to web browser versions as the site functionality uses advanced web browser features. The error has been logged but please also feel free to contact us for help."):this.props.children}}]),t}(n.Component),he=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e));var n=k.serviceWorker(Object(o.a)(Object(o.a)(a)),!1);return a.state={page:a.props.page,het:n,nav:a.props.nav},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this;switch(this.state.page){case"volunteers":e=r.a.createElement(q,{het:this.state.het});break;case"details":e=r.a.createElement(K,null);break;case"results":e=r.a.createElement(re,{het:this.state.het});break;case"competitors":e=r.a.createElement($,{het:this.state.het,nav:function(e){return t.setState({nav:e})}});break;case"swim":e=r.a.createElement(me,{het:this.state.het});break;default:e=r.a.createElement(K,{het:this.state.het})}return r.a.createElement("div",null,"error"===this.state.page?r.a.createElement(de,null):null,this.state.nav?r.a.createElement(fe,{nav:function(e){return t.setState({page:e})},page:this.state.page,het:this.state.het}):null,this.state.message?r.a.createElement("div",{className:"alert alert-dismissible alert-"+this.state.message.type},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return t.setState({message:null})},"data-dismiss":"alert"},"\xd7"),r.a.createElement("strong",null,this.state.message.text)):null,r.a.createElement("div",{id:"page",className:"container"},e))}}]),t}(n.Component),de=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return k.nonexist(),r.a.createElement("div",null,"Error")}}]),t}(n.Component),fe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,in:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({open:!1,in:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar navbar-default"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("button",{type:"button",className:"navbar-toggle collapsed",onClick:function(){e.setState({in:!e.state.in})}},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"})),r.a.createElement("a",{href:"http://www.hatchendtri.com/",className:"navbar-brand"},"Hatch End Triathlon")),r.a.createElement("div",{className:this.state.in?"collapse navbar-collapse in":"collapse navbar-collapse"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:".",className:"nav-link",onClick:function(t){t.preventDefault(),e.props.nav("volunteers")}},"Volunteers")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:".",className:"nav-link",onClick:function(t){t.preventDefault(),e.props.nav("details")}},"Details")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:".",className:"nav-link",onClick:function(t){t.preventDefault(),e.props.nav("results")}},"Results")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:".",className:"nav-link",onClick:function(t){t.preventDefault(),e.props.nav("competitors")}},"Competitors")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:".",className:"nav-link",onClick:function(t){t.preventDefault(),e.props.nav("swim")}},"Swim")),null),null)))}}]),t}(n.Component),ve=he,Ee=(a(35),null),be=null,ge=!1;window.location.search&&window.location.search.startsWith("?swim")?(be="swim",Ee=document.getElementById("HE_root")):window.location.search&&window.location.search.startsWith("?error")?(be="error",Ee=document.getElementById("HE_root")):(Ee=document.getElementById("HE_root"))?(be="volunteers",ge=!0):(Ee=document.getElementById("HE_volunteers"))?be="volunteers":(Ee=document.getElementById("HE_competitors"))?be="competitors":(Ee=document.getElementById("HE_results"))?be="results":(Ee=document.getElementById("HE_details"))&&(be="details"),Ee&&s.a.render(r.a.createElement(pe,null,r.a.createElement(ve,{page:be,nav:ge})),Ee),"swim"===be?g({onUpdate:function(){return console.log("service worker onUpdate")},onSuccess:function(){return console.log("service worker onSuccess")}}):N()}},[[19,2,1]]]);
//# sourceMappingURL=main.61de0f48.chunk.js.map