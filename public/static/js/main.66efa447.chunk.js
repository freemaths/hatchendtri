(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(44)},42:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),s=a.n(l),o=a(1),c=a(2),i=a(4),u=a(3),m=a(5),d=a(7),h=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"lines",value:function(e){if("string"!==typeof e)return e;var t=0;return e.split("\n").map(function(e){return r.a.createElement("div",{key:t++},e)})}},{key:"render",value:function(){var e=this.props.save?r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.close,"data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",onClick:this.props.save,className:"btn btn-"+(this.props.del?"danger":"primary")},this.props.del?"Delete":"Save changes")):null,t=this.props.y?{position:"absolute",top:this.props.y+"px",zIndex:1}:{position:"absolute",zIndex:1};return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:this.props.close,"aria-hidden":"true"},"\xd7"),r.a.createElement("h4",{className:"modal-title"},this.props.title)),r.a.createElement("div",{className:"modal-body"},this.lines(this.props.body)),e)))}}]),t}(n.Component),p=a(10),f=a.n(p),v=a(21);a(35);function E(e,t,a,n){var r=!1;fetch(e,function(e,t){var a;a=e?{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","HET-Token":k.user?k.user.token:null,"HET-Env":JSON.stringify(Object({NODE_ENV:"production",PUBLIC_URL:""}))},method:"post",cache:"no-cache",body:JSON.stringify(e)}:{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","HET-Token":k.user?k.user.token:null,"HET-Env":JSON.stringify(Object({NODE_ENV:"production",PUBLIC_URL:""}))},method:"get",cache:"no-cache"};return a}(a)).then(function(t){return t.ok||(r=t.statusText),e.endsWith(".gz")||e.endsWith(".csv")?t.text():t.json()}).then(function(e){t&&t({error:r,data:e})}).catch(function(a){console.error(e,r),t&&t({error:a,data:{error:r||a.message}})})}var b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");b?(!function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):y(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):y(t,e)})}}function y(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}function N(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}var k=new(function(){function e(){var t=this;Object(o.a)(this,e),this.loadResults=function(){var e={},a={2000:["TM","TF","AM","AF"],2001:["TM","TF","AM","AF"],2002:["TM","TF","AM","AF"],2003:["TF","AM"],2004:["TM","TF","AM","AF"],2005:["T","YM","YF","AM","AF"],2006:["T1","T2","T3","Y","A"],2007:["T","A"],2008:["T1_M","T1_F","T2_M","T2_F","T3_M","T3_F","Y_M","Y_F","A"],2009:["T1","T2","T3","Y","A"],2010:["T1","T2","T3","Y","A"],2011:["T1","T2","T3","Y","A"],2012:["T1","T2","T3","Y","A"],2013:["TS","T1","T2","T3","Y","A"],2014:["TS","T1","T2","T3","Y","A"],2017:["TS","T1","T2","T3","Y","A"],2018:["Club","TS","T1","T2","T3","Y","A"]};Object.keys(a).forEach(function(n){var r=null;a[n].forEach(function(a){E("csv/"+n+"_"+a+".csv",function(l){l.error?t.parent.setState({message:{type:"danger",text:"csv Error: "+l.data.error}}):("2018"===n&&"Club"===a?(r={},l.data.split(/\r\n|\n/).forEach(function(e){var t=e.split(",");t[0]&&"#"!==t[0]&&t[1]&&(r[t[0]]=t[1])})):e[n]=t.parseCSV(l.data,e[n],a,r),console.log("parsed",n,a),"2018"===n&&"A"===a&&(t.store_results(e),t.save(function(){return t.getResults()})))})})})},this.version=7,this.results=null,this.cache={},this.parent=null,this.vs=null,this.roles=null,this.admin=!1}return Object(c.a)(e,[{key:"serviceWorker",value:function(e,t){return this.parent=e,t?g({onUpdate:this.onUpdate,onSuccess:this.onSuccess}):N(),this}},{key:"get_versions",value:function(e){E("/ajax",function(t){t.error?console.log("error",t):t.data.versions?e(t.data.versions):console.error("get_versions")},{req:"versions"})}},{key:"get_volunteers",value:function(e){var t=this;E("/ajax",function(e){e.error?console.log("error",e):e.data?(e.data.files.forEach(function(e){"volunteers"===e.name?t.vs=O(e.file):t[e.name]=O(e.file)}),t.parent.setState({het:t})):console.error("get_volunteers")},{req:"files",files:["volunteers","roles"]})}},{key:"get_csv",value:function(e,t){E("/ajax",function(a){a.error?console.log("error",a):a.data?a.data.files.forEach(function(e){t(e.file)}):console.error("get_csv",e)},{req:"files",files:[e],type:"csv"})}},{key:"req_login",value:function(e,t){this.user=this.vs.volunteers[e],this.parent.setState({het:this})}},{key:"save_vol",value:function(e){!e.id&&e.name?(e.id=Math.max.apply(Math,Object(v.a)(Object.keys(this.vs)))+1,this.vs[e.id]=e):!e.name&&e.id?delete this.vs[e.id]:this.vs[e.id]=e,E("/ajax",function(e){e.error&&console.log("error",e)},{req:"save",data:{volunteers:T(this.vs)}}),this.parent.setState({het:this})}},{key:"save_roles",value:function(e){this.roles=e,E("/ajax",function(e){e.error&&console.log("error",e)},{req:"save",data:{roles:T(this.roles)}}),this.parent.setState({het:this})}},{key:"get_competitors",value:function(e,t){var a=this;E("/ajax",function(n){n.error?(console.log("error",n),t()):n.data?n.data.files.forEach(function(t){"competitors"===t.name&&(a.competitors=O(t.file)),e()}):(console.error("get_competitors"),t())},{req:"files",files:["competitors"]})}},{key:"save_competitors",value:function(e){this.competitors=e,E("/ajax",function(e){e.error&&console.log("error",e)},{req:"save",data:{competitors:T(this.competitors)}}),this.parent.setState({het:this})}},{key:"process",value:function(e){var t=this;this.vs={},e.volunteers.forEach(function(e){return t.vs[e.id]=JSON.parse(e.json)}),this.roles=JSON.parse(e.roles.json)}},{key:"get_results",value:function(){var e=this,t=0;this.results||(this.results=this.load_results(),this.results&&this.results.ts&&(t=this.results.ts,delete this.results.ts,this.parent.setState({het:this}))),E("/ajax",function(a){a.error?console.log("error",a):a.data.files?(a.data.files.forEach(function(t){e[t.name]=O(t.file),e[t.name].ts=t.ts}),e.results&&e.results.ts&&(e.store(e.results),delete e.results.ts,e.parent.setState({het:e}))):console.log("no updates",t)},{req:"files",files:["results"]})}},{key:"onUpdate",value:function(e){this.parent.setState({ready:!1,message:{type:"danger",text:"Software Updating - page will reload"}}),setTimeout(function(){window.location.reload()},2e3)}},{key:"onSuccess",value:function(e){this.parent.setState({type:"success",text:"Content is cached for offline use."}),this.ready()}},{key:"parseCSV",value:function(e,t,a,n){for(var r=e.split(/\r\n|\n/).map(function(e){return e.replace(/"([^,]*), ([^,]*)"/,"$2 $1").replace(/"/g,"").split(",")}),l=r[0],s=0;s<l.length;s++)"Position"===l[s]&&(l[s]="Pos"),"Athlete Name"!==l[s]&&"First"!==l[s]||(l[s]="Name"),"Cycle"===l[s]&&(l[s]="Bike"),"Gender"===l[s]&&(l[s]="MF"),"Class"===l[s]&&(l[s]="Cat"),"Gun Time"!==l[s]&&"Time"!==l[s]||(l[s]="Total"),"Bib"!==l[s]&&"Bib #"!==l[s]&&"Race No"!==l[s]||(l[s]="#"),"Category"===l[s]&&(l[s]="Cat");t||(t=[]),r.shift();var o=l.indexOf("Total"),c=!1;return a.endsWith("M")?c="M":a.endsWith("F")&&(c="F"),r.forEach(function(e){var r={};if(e.length===l.length&&1*e[0]>0&&"Not started"!==e[o]){for(var s=0;s<e.length;s++)e[s].length<30&&"#VALUE!"!==e[s]?r[l[s]]=e[s]:r[l[s]]="n/a";var i={X:"T1",Y:"T2",Z:"T3",1:"T1",2:"T2",3:"T3",T1:"T1",T2:"T2",T3:"T3",TS1:"T1",TS2:"T2",TS3:"T3","Tristars Start":"TS","Tristars 1":"T1","Tristars 2":"T2","Tristars 3":"T3","Tristar 1":"T1","Tristar 2":"T2","Tristar 3":"T3",Y15:"Y",Y16:"Y",Y17:"Y","M17-18":"Y",M1718:"Y","F17-18":"Y",F1718:"Y","17-19":"Y",1719:"Y",M1919:"Y",F1919:"Y",Youth:"Y",Youths:"Y",YOU:"Y",YTH:"Y",A:"Y",B:"Y",C:"Y",AY:"Y",BY:"Y",CY:"Y",Y1:"Y","Y-A":"Y","Y-B":"Y","Y-C":"Y","S-1":"S1","S-2":"S2","S-3":"S3","S-4":"S4","16-19":"Y","20-24":"S1","25-29":"S2","30-34":"S3","35-39":"S4",1619:"Y",2024:"S1",2529:"S2",3034:"S3",3539:"S4",M1619:"Y",M2024:"S1",M2529:"S2",M3034:"S3",M3539:"S4",F1619:"Y",F2024:"S1",F2529:"S2",F3034:"S3",F3539:"S4","M16-19":"Y","M20-24":"S1","M25-29":"S2","M30-34":"S3","M35-39":"S4","F16-19":"Y","F20-24":"S1","F25-29":"S2","F30-34":"S3","F35-39":"S4",D:"S1",E:"S2",F:"S3",G:"S4","S-D":"S1","S-E":"S2","S-F":"S3","S-G":"S4","M40-44":"V1","M45-49":"V2","M50-54":"V2","M55-59":"V3","M60-64":"V3","M65+":"V4","F40-44":"V1","F45-49":"V2","F50-54":"V2","F55-59":"V3","F60-64":"V3","F65+":"V4",M4044:"V1",M4549:"V2",M5054:"V2",M5559:"V3",M6064:"V3",M6569:"V4",M8099:"V4",F4044:"V1",F4549:"V2",F5054:"V2",F5559:"V3",F6064:"V3",F6569:"V4",F8099:"V4","40-44":"V1","45-49":"V2","50-54":"V2","55-59":"V3","60-64":"V3","65-69":"V4","65+":"V4",6099:"V4","80-84":"V4",4044:"V1",4549:"V2",5054:"V2",5559:"V3",6064:"V3",6569:"V4",H:"V1",V:"V2",VV:"V3",VVV:"V4",I:"V2",J:"V3",K:"V4","V-H":"V1","V-I":"V2","V-J":"V3","V-K":"V4"};r.MF?"Male"===r.MF||"male"===r.MF||"m"===r.MF?r.MF="M":"Female"!==r.MF&&"female"!==r.MF&&"f"!==r.MF||(r.MF="F"):c?r.MF=c:r.Cat&&r.Cat.startsWith("M")?r.MF="M":r.Cat&&r.Cat.startsWith("F")&&(r.MF="F");r.Cat?r.Cat=i[r.Cat]?i[r.Cat]:r.Cat:r.Cat={TS:"TS",T1:"T1",T2:"T2",T3:"T3",Y:"Y",Y_:"Y"}[a.substr(0,2)],"Y"===r.Cat&&a.startsWith("A")&&(r.Cat="SY"),"NULL"===r.Club&&(r.Club=""),r.Family&&(r.Name+=" "+r.Family),["Swim","Bike","Run","Total","T1","T2"].forEach(function(e){-1!==["99:99:99","cnc","n/a","DNF","Started","DNC"].indexOf(r[e])&&(r[e]="")}),"n/a"===r.Club&&(r.Club=""),"999999"!==r.Pos&&"NP"!==r.Pos&&""!==r.Total||(r.Pos="DNF"),n&&(r.Club=n[r["#"]]?n[r["#"]]:""),(r.Total||r.Swim||r.Bike||r.Run)&&t.push(r)}}),t}},{key:"store_results",value:function(e){var t;if(window.localStorage)try{t=this.compress(e),window.localStorage.setItem("HETresults",t),console.log("results stored",t.length)}catch(a){console.error("results not stored",a.name,t)}}},{key:"store",value:function(e){var t;if(window.localStorage)try{t=T(e),window.localStorage.setItem("HETresults",t),console.log("results stored",t.length)}catch(a){console.error("results not stored",a.name,t)}}},{key:"clear_results",value:function(){window.localStorage&&window.localStorage.removeItem("HETresults")}},{key:"load_results",value:function(){var e=null;if(window.localStorage&&window.localStorage.HETresults)try{var t=window.localStorage.getItem("HETresults");e=O(t),console.log("load_results",t.length)}catch(a){console.error("failed to unzip results from localStorage",a),window.localStorage.removeItem("HETresults"),e=null}return e}},{key:"save",value:function(e){var t=window.localStorage.getItem("HETresults");E("/ajax/save.php",function(a){console.log("saved",t.length,a),e&&e()},{results:t})}},{key:"compress",value:function(e){var t={};return Object.keys(e).forEach(function(a){var n,r=["Pos","Name","MF","Cat","Total","Swim","Bike","Run"];"string"===typeof e[a][0].Club&&r.push("Club"),"string"===typeof e[a][0].T1&&(r.push("T1"),r.push("T2")),t[a]=[r],e[a].forEach(function(e){n=[],r.forEach(function(t){"string"===typeof e[t]&&n.push(e[t])}),t[a].push(n)})}),T(t)}}]),e}()),S={};function j(e){if(S[e]?S[e].n++:(S[e]={n:1},Object.keys(S).forEach(function(t){t!==e&&e.startsWith(t)&&S[t].show&&(S[e].show=!0)})),S[e].show)return!0}function C(e){return e===Object(e)?JSON.parse(JSON.stringify(e)):e}function T(e){var t=btoa(f.a.deflate(JSON.stringify(e),{to:"string"}));return j("zip")&&console.log("zip",e,JSON.stringify(e).length,t.length),t}function O(e){var t=JSON.parse(f.a.inflate(atob(e),{to:"string"}));return j("unzip")&&console.log("unzip",t,JSON.stringify(t).length,e.length),t}var w=a(20),F=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.data)return null;var e={},t=0,a=[],n={},l={};this.props.data.forEach(function(r){var s=[],o=r.adult?r.adult.split(" ")[0]:null;o&&"none"!==o||(o=r.junior?r.junior.split(" ")[0]:null),Object.keys(r).filter(function(e){return-1===["whatsapp","id","key","role","admin"].indexOf(e)}).forEach(function(a){e[a]||0===e[a]||(e[a]=t++),s[e[a]]=r[a],"email"===a&&r[a]&&(n[r[a]]=r[a],o&&(l[o]||(l[o]={}),l[o][r[a]]=r[a]))}),a.push(s)});var s=[];return Object.keys(e).forEach(function(t){return s[e[t]]=t.charAt(0).toUpperCase()+t.slice(1)}),a.unshift(s),(n=Object.keys(n).join(";"))&&a.push(["All",n]),Object.keys(l).forEach(function(e){return a.push([e,Object.keys(l[e]).join(";")])}),r.a.createElement(w.CSVLink,{onClick:this.props.close,data:a,filename:this.props.filename,className:"btn btn-primary",target:"_blank"},"Download")}}]),t}(n.Component);function M(e){return e||""}var x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={vid:null,race:"adult",update:!1,roles:!1,vol:!1,role:null,name:"",admin:!1},a.showRole=function(e,t){a.setState({role:{x:e.nativeEvent.pageX,y:e.nativeEvent.pageY,r:t}})},a.code=function(e){"H20e19"===e.target.value&&(a.setState({admin:!0,name:""}),k.admin=!0)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){k.get_volunteers()}},{key:"render",value:function(){var e=this;if(!k.vs)return null;var t={},a={};k.roles.sections.forEach(function(e){return e.roles.forEach(function(a){return t[e.name+" "+a.role]={adult:[],junior:[]}})}),Object.keys(k.vs).map(function(e){return k.vs[e]}).forEach(function(e){e.adult&&"none"!==e.adult&&(t[e.adult]?t[e.adult].adult.push(e.id):console.log("Adult role missing:",e.adult,e.name),a[e.id]||(a[e.id]=e)),e.junior&&"none"!==e.junior&&(t[e.junior]?t[e.junior].junior.push(e.id):console.log("Junior role missing:",e.junior,e.name),a[e.id]||(a[e.id]=e))}),k.roles.sections.forEach(function(e){if(!a[e.lead]){var t=C(k.vs[e.lead]);t.adult=t.junior=e.name+" Lead",a[e.lead]=t}});var n=1;a=k.admin&&!this.state.csv?k.vs:a;var l=Object.keys(a).filter(function(t){return e.state.name.length>0&&a[t].name.toLowerCase().indexOf(e.state.name.toLowerCase())>-1}).map(function(t){return r.a.createElement("div",{className:"row",key:n++},r.a.createElement("span",{onClick:function(){return e.setState({vid:t,update:!0})},className:"btn-link col-md-3"},a[t].name),r.a.createElement("span",{className:"col-md-3"},r.a.createElement("b",null,"Adult:")," ",a[t].adult),r.a.createElement("span",{className:"col-md-3"},r.a.createElement("b",null,"Junior:")," ",a[t].junior))}),s=[],o=this.state.race,c=0;k.roles.sections.forEach(function(a){s.push(r.a.createElement("tr",{key:c++},r.a.createElement("th",null,a.name," (",a.start[o],"-",a.end[o],")"),r.a.createElement("th",null,a.lead>0?"Lead":""),r.a.createElement("th",null,-1!==a.lead?k.vs[a.lead].name:""))),a.roles.forEach(function(n){for(var l=t[a.name+" "+n.role][o].length>n.qty[o].min?t[a.name+" "+n.role][o].length:n.qty[o].min,i=function(){var l=null,i=t[a.name+" "+n.role][o].length>u?t[a.name+" "+n.role][o][u]:-1;-1!==i&&(l=k.vs[i]);var m=n.role;n.notes&&(m=r.a.createElement("span",{className:"btn-link",onClick:function(t){return e.showRole(t,n)}},m)),s.push(r.a.createElement("tr",{key:c++},r.a.createElement("td",null),r.a.createElement("td",null,m),r.a.createElement("td",{style:i>0?{color:"#007ba7"}:null},l?r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({vid:l.id,update:!0})}},l.name):"")))},u=0;u<l;u++)i()})});var i;return i=r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{onChange:function(t){return e.setState({name:t.target.value})},type:"text",className:"form-control",id:"Name",value:this.state.name,placeholder:"Name"})),k.admin?r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-3"},r.a.createElement(R,{set_volunteer:function(t){return e.setState({vid:t})},filter:this.state.name,vid:this.state.volunteer,vs:k.vs})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{onClick:function(){return e.setState({vol:!0})},type:"button",className:"btn btn-primary form-control"},"Add Volunteer")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{type:"button",onClick:function(){return e.setState({roles:!0})},className:"btn btn-default form-control"},"Edit Roles")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("button",{type:"button",onClick:function(){return e.setState({csv:!0})},className:"btn btn-default form-control"},"CSV"))):"?"===this.state.name?r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{onChange:this.code,autoFocus:!0,type:"password",className:"form-control",id:"Code",placeholder:"Code"})):null),k.admin&&this.state.csv?r.a.createElement(F,{filename:"volunteers.csv",close:function(){return e.setState({csv:null})},data:Object.keys(a).map(function(e){return a[e]})}):r.a.createElement("div",null,this.state.vid&&k.admin?r.a.createElement(Y,{alloc:t,vid:this.state.vid,close:function(){return e.setState({vid:null})}}):null,this.state.roles?r.a.createElement(_,{close:function(){return e.setState({roles:!1})}}):null,r.a.createElement(V,{show:this.state.vol,save:this.newVolunteer,close:function(){return e.setState({vol:!1})}}),r.a.createElement(A,{role:this.state.role,close:function(){return e.setState({role:null})}}),r.a.createElement("div",null,r.a.createElement("form",{className:"form-horizontal",onSubmit:this.login},i,l?r.a.createElement("div",null,l,r.a.createElement("br",null)):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-1 control-label"},"Race:"),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(G,{set_race:function(t){return e.setState({race:t})}})))),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Section"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,s))))}}]),t}(n.Component),A=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.role&&this.props.role.r.notes?r.a.createElement(h,{x:this.props.role.x,y:this.props.role.y,title:this.props.role.r.role,body:this.props.role.r.notes,close:this.props.close}):null}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={v:{name:"",email:""}},a.update=function(e,t){var n=a.state.v;n[e]=t,a.setState({v:n})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({v:{name:"",email:""}})}},{key:"render",value:function(){var e=this;if(!this.props.show)return null;var t=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(){return k.save_vol(e.state.v)},className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Name"},"Name:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("name",t.target.value)},type:"text",className:"form-control",id:"Name",value:this.state.v.name,placeholder:"Name"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Email"},"Email:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("email",t.target.value)},type:"email",className:"form-control",id:"Email",value:this.state.v.email,placeholder:"Email"})))));return r.a.createElement(h,{save:function(){k.save_vol(e.state.v),e.props.close()},title:"Volunteer",body:t,close:this.props.close})}}]),t}(n.Component),Y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={v:C(k.vs[a.props.vid])},a.update=function(e,t){var n=a.state.v;"adult"!==e&&"junior"!==e||"any"!==t?n[e]=t:n[e]&&delete n[e],a.setState({v:n})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;console.log("Details",this.props.vid);var t=null;k.admin&&(t=r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Adult"},"Adult Role:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(W,{alloc:this.props.alloc,onChange:function(t){return e.update("adult",t.target.value)},roles:k.roles,v:this.state.v,race:"adult"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Junior"},"Junior role:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(W,{alloc:this.props.alloc,onChange:function(t){return e.update("junior",t.target.value)},roles:k.roles,v:this.state.v,race:"junior"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Admin"},"Admin:"),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("input",{onChange:function(t){return e.update("admin",!e.state.v.admin)},type:"checkbox",className:"form-control",id:"WhatsApp",checked:M(this.state.v.admin)})))));var a=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.save,className:"form-horizontal"},t,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Name"},"Name:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("name",t.target.value)},type:"text",className:"form-control",id:"Name",value:this.state.v.name,placeholder:"Name"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Email"},"Email:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("email",t.target.value)},type:"email",className:"form-control",id:"Email",value:this.state.v.email,placeholder:"Email"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Mobile"},"Mobile:"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{onChange:function(t){return e.update("mobile",t.target.value)},type:"tel",className:"form-control",id:"Mobile",value:M(this.state.v.mobile),placeholder:"Mobile"})),r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"WhatsApp"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-whatsapp",style:{fontSize:"large",color:"limegreen"}}),"\xa0WhatsApp")),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("input",{onChange:function(t){return e.update("whatsapp",!e.state.v.whatsapp)},type:"checkbox",className:"form-control",id:"WhatsApp",checked:M(this.state.v.whatsapp)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Notes"},"Notes:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("textarea",{onChange:function(t){return e.update("notes",t.target.value)},rows:"4",className:"form-control",value:M(this.state.v.notes)})))));return r.a.createElement(h,{del:!this.state.v.name,save:function(){return k.save_vol(e.state.v)},title:"Update Details",body:a,close:this.props.close})}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={roles:C(k.roles),section:null,role:null,add:!1},a.addRole=function(e){var t={role:e,id:a.state.section.roles.length,qty:{adult:{min:0,max:0},junior:{min:0,max:0}},section:a.state.section.id},n=a.state.roles;n.sections[a.state.section.id].roles.push(t),a.setState({roles:n})},a.deleteRole=function(){var e=a.state.roles;e.sections[a.state.section.id].roles.splice(a.state.role.id,1),a.setState({roles:e,role:null})},a.change=function(e,t,n,r,l){var s=a.state.section;if("s"===t)l?s[n][r][l]=e:r?s[n][r]=e:s[n]=e;else{var o=a.state.role;l?(o[n][r][l]=e,"min"===l&&1*o[n][r].max<1*e?o[n][r].max=e:"max"===l&&1*o[n][r].min>1*e&&(o[n][r].min=e)):r?o[n][r]=e:o[n]=e}a.setState({section:s})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.section?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"roles"},"Role:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(B,{section:this.state.section,role:this.state.role,onChange:function(t){return e.setState({role:e.state.section.roles[t.target.value],add:!1})},roles:this.state.role})),r.a.createElement("div",{className:"col-md-2"},this.state.role?r.a.createElement("button",{type:"button",onClick:this.deleteRole,className:"btn btn-default form-control"},"Delete"):r.a.createElement("button",{type:"button",onClick:function(){return e.setState({add:!0})},className:"btn btn-default form-control"},"Add"))):null,a=this.state.section?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Lead:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(R,{vid:this.state.section.lead,set_volunteer:function(t){return e.change(t,"s","lead")},vs:this.props.vs}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Adult Start/End:"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:this.state.section.start.adult,onChange:function(t){return e.change(t.target.value,"s","start","adult")},className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:this.state.section.end.adult,onChange:function(t){return e.change(t.target.value,"s","end","adult")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Junior Start/End:"),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:M(this.state.section.start.junior),onChange:function(t){return e.change(t.target.value,"s","start","junior")},className:"form-control"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{value:M(this.state.section.end.junior),onChange:function(t){return e.change(t.target.value,"s","end","junior")},className:"form-control"})))):null,n=this.state.role?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Name:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{value:this.state.role.role,onChange:function(t){return e.change(t.target.value,"r","role")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Adult Min/Max:"),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.adult.min,onChange:function(t){return e.change(t.target.value,"r","qty","adult","min")},className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.adult.max,onChange:function(t){return e.change(t.target.value,"r","qty","adult","max")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Junior Min/Max:"),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.junior.min,onChange:function(t){return e.change(t.target.value,"r","qty","junior","min")},className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",value:this.state.role.qty.junior.max,onChange:function(t){return e.change(t.target.value,"r","qty","junior","max")},className:"form-control"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Notes"},"Notes:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("textarea",{onChange:function(t){return e.change(t.target.value,"r","notes")},rows:"4",className:"form-control",value:M(this.state.role.notes)})))):this.state.add?r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label"},"Name:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{value:"",onChange:function(t){return e.addRole(t.target.value,"r","role")},className:"form-control"})))):null,l=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.save,className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"roles"},"Section:"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(J,{section:this.state.section,onChange:function(t){return e.setState({section:e.state.roles.sections[t.target.value],role:null,addRole:!1})},roles:this.state.roles}))),a,t,n));return r.a.createElement(h,{save:function(){return k.save_roles(e.state.roles)},title:"Edit Roles",body:l,close:this.props.close})}}]),t}(n.Component),G=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("select",{className:"form-control",value:this.props.race,onChange:function(t){return e.props.set_race(t.target.value)}},r.a.createElement("option",{value:"adult"},"Adult"),r.a.createElement("option",{value:"junior"},"Junior"))}}]),t}(n.Component),R=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement("option",{key:0,value:0},"name")];return Object.keys(k.vs).map(function(e){return k.vs[e]}).filter(function(t){return!e.props.filter||-1!==t.name.toLowerCase().indexOf(e.props.filter.toLowerCase())}).sort(function(e,t){return e.name.localeCompare(t.name)}).forEach(function(e){t.push(r.a.createElement("option",{key:e.id,value:e.id},e.name))}),r.a.createElement("select",{className:"form-control",value:this.props.vid?this.props.vid:0,onChange:function(t){return e.props.set_volunteer(t.target.value)}},t)}}]),t}(n.Component),W=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.v,a=t[this.props.race]?t[this.props.race]:"any",n=[r.a.createElement("option",{key:0,value:"any"},"any"),r.a.createElement("option",{key:-1,value:"none"},"none")];return this.props.roles.sections.forEach(function(t){t.roles.forEach(function(a){e.props.alloc[t.name+" "+a.role][e.props.race].length<a.qty[e.props.race].max?n.push(r.a.createElement("option",{key:t.id+"_"+a.id},t.name," ",a.role)):n.push(r.a.createElement("option",{className:"green",key:t.id+"_"+a.id},t.name," ",a.role))})}),r.a.createElement("select",{className:"form-control",value:a,onChange:this.props.onChange},n)}}]),t}(n.Component),J=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"select"},"select")];return k.roles.sections.forEach(function(t){e.push(r.a.createElement("option",{key:t.id,value:t.id},t.name))}),r.a.createElement("select",{className:"form-control",value:this.props.section?this.props.section.id:"select",onChange:this.props.onChange},e)}}]),t}(n.Component),B=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"select"},"select")];return this.props.section.roles.forEach(function(t){e.push(r.a.createElement("option",{key:t.id,value:t.id},t.role))}),r.a.createElement("select",{className:"form-control",value:this.props.role?this.props.role.id:"select",onChange:this.props.onChange},e)}}]),t}(n.Component),L=x,H=a(8);function q(e){var t=e.split(":"),a=Object(H.a)(t,3),n=a[0],r=a[1],l=a[2];return 1*n>0?60*n+1*r:60*r+1*l}function D(e){return e>720?720:e}function P(e,t){var a=[24e3,24900,25800,27e3,28200,29700],n={"Tristars Start":"11:10","Tristars 1":"11:20","Tristars 2":"11:40","Tristars 3":"12:10",Youths:"12:40"};if(n[e])return n[e];for(var r=a.length-1;t-900+25200<a[r]&&r>0;)r--;return function(e){var t=Math.floor(e/3600);return t+":"+Math.floor((e-3600*t)/60)}(a[r])}var z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={filter:"",sex:"?",ageGroup:"",scheduled:!1},a.parseComps=function(e){for(var t=[],n=e.split(/\r\n|\n/).map(function(e){return e.replace(/"([^,]*), ([^,]*)"/,"$2 $1").replace(/"/g,"").split(",")}),r=n[0],l={Forename:"forename",Surname:"surname",Gender:"gender",Club:"club",Estimated_400m_swim_time:"swim",AgeGroup:"ageGroup","400m_swim_time":"swim","300m_swim_time":"swim","200m_swim_time":"swim","100m_swim_time":"swim",Estimated_50m_swim_time:"swim"},s=1;s<n.length;s++){for(var o={},c=0;c<r.length;c++)l[r[c]]&&n[s][c]&&(o[l[r[c]]]=n[s][c]);o.swim?("00:00:01"!==o.swim&&"0:00:01"!==o.swim||(o.swim="0:10:01"),t.push(o)):console.log("parseComps E",o)}return a.schedule(t,{}),a.setState({cs:t}),k.save_competitors(t),null},a.schedule=function(e,t){var n=[{i:0,t:0,max:0},{i:0,t:0,max:0},{i:0,t:0,max:0}],r="",l=201;e.sort(function(e,t){return a.sort(t,e)}).forEach(function(e){if(e.ageGroup.startsWith("M")||e.ageGroup.startsWith("F"))t[e.ageGroup]||(t[e.ageGroup]=e.ageGroup);else if(r!==e.ageGroup){r=e.ageGroup;var a={"Tristars Start":16200,"Tristars 1":16800,"Tristars 2":18e3,"Tristars 3":19800,Youths:21600};a[e.ageGroup]&&(n=[{i:0,t:a[e.ageGroup],max:0},{i:0,t:a[e.ageGroup],max:0},{i:0,t:a[e.ageGroup],max:0}],l={"Tristars Start":1,"Tristars 1":41,"Tristars 2":101,"Tristars 3":151,Youths:21}[e.ageGroup])}var s=-1;n[0].i<6&&(0===n[0].i&&(n[0].max=D(q(e.swim))),n[0].i++,s=n[0].t),-1===s&&(s=(n=n.sort(function(e,t){return e.t+e.max-t.t-t.max}))[0].t+n[0].max+60,n[0].t=s,n[0].i=1,n[0].max=D(q(e.swim))),e.briefing=P(e.ageGroup,s),e.start=function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=(t+7<10?"0"+(t+7):t+7)+":"+(a<10?"0"+a:a);return n.startsWith("09:0")?n="08:59":"12:02"===n&&(n="11:59"),n}(s),e.n=l++})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.get_competitors(function(){return e.setState({cs:k.competitors})},function(){return k.get_csv("competitors",function(t){return e.parseComps(t)})})}},{key:"filter",value:function(e){return("?"===this.state.sex||e.gender.startsWith(this.state.sex))&&(""===this.state.ageGroup||e.ageGroup===this.state.ageGroup||"Adult"===this.state.ageGroup&&(e.ageGroup.startsWith("M")||e.ageGroup.startsWith("F")))&&(0===this.state.filter.length||-1!==(e.forename.toLowerCase()+" "+e.surname.toLowerCase()).indexOf(this.state.filter.toLowerCase()))}},{key:"sort",value:function(e,t){var a=0,n={"Tristars Start":4,"Tristars 1":3,"Tristars 2":2,"Tristars 3":1,Youths:"0"},r=n[e.ageGroup]?n[e.ageGroup]:5,l=n[t.ageGroup]?n[t.ageGroup]:5;if(r-l!==0)a=r-l;else{var s=q(e.swim),o=q(t.swim);a=s!==o?s-o:(e.forename+" "+e.surname).localeCompare(t.forename+" "+t.surname)}return a}},{key:"sortN",value:function(e,t){var a={"Tristars Start":1,"Tristars 1":2,"Tristars 2":3,"Tristars 3":4,Youths:5},n=a[e.ageGroup]?a[e.ageGroup]:0,r=a[t.ageGroup]?a[t.ageGroup]:0;return n-r!==0?n-r:e.n-t.n}},{key:"render",value:function(){var e=this;if(!this.state.cs)return null;var t=0,a={},n=C(this.state.cs).filter(function(t){return e.filter(t)}).sort(function(t,a){return e.sortN(t,a)}).map(function(n){a[n.ageGroup]||!n.ageGroup.startsWith("M")&&!n.ageGroup.startsWith("F")||(a[n.ageGroup]=n.ageGroup);var l=r.a.createElement("a",{onClick:function(t){return e.setState({c:n,y:t.nativeEvent.pageY})}},n.n);return r.a.createElement("tr",{key:t++},r.a.createElement("td",null,l),r.a.createElement("td",null,n.forename),r.a.createElement("td",null,n.surname),r.a.createElement("td",null,n.gender),r.a.createElement("td",null,n.ageGroup),r.a.createElement("td",null,n.briefing),r.a.createElement("td",null,n.start))});return k.admin&&this.state.csv?r.a.createElement(F,{filename:"competitors.csv",close:function(){return e.setState({csv:null})},data:this.state.cs}):r.a.createElement("div",null,r.a.createElement(I,{y:this.state.y,c:this.state.c,save:this.save,close:function(){return e.setState({c:null})}}),r.a.createElement("form",{className:"form-horizontal",onSubmit:this.login},r.a.createElement("div",{className:"form-group"},k.admin?r.a.createElement("div",{className:"col-md-1"},r.a.createElement("button",{type:"button",onClick:function(){return e.setState({csv:!0})},className:"btn btn-default form-control"},"CSV")):null,r.a.createElement("label",{className:"col-sm-1 control-label"},"Name:"),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("input",{type:"text",size:"10",className:"form-control",onChange:function(t){return e.setState({filter:t.target.value})}})),r.a.createElement("label",{className:"col-sm-1 control-label"},"M/F:"),r.a.createElement("div",{className:"col-sm-2"},r.a.createElement(X,{mf:this.state.sex,onChange:function(t){return e.setState({sex:t.target.value})}})),r.a.createElement("label",{className:"col-sm-2 control-label"},"Age Group:"),r.a.createElement("div",{className:"col-sm-2"},r.a.createElement(U,{groups:a,ageGroup:this.state.ageGroup,onChange:function(t){return e.setState({ageGroup:t.target.value})}})))),r.a.createElement("div",null,n.length," Competitors"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Forename"),r.a.createElement("th",null,"Surname"),r.a.createElement("th",null,"Gender"),r.a.createElement("th",null,"Age Group"),r.a.createElement("th",null,"Briefing"),r.a.createElement("th",null,"Start"))),r.a.createElement("tbody",null,n)))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={c:a.props.c},a.update=function(e,t){a.state.c[e]=t,a.setState({c:t})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({c:e.c})}},{key:"render",value:function(){var e=this;if(!this.props.c)return null;var t=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.save,className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"FirstName"},"Forename:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("forename",t.target.value)},type:"text",className:"form-control",value:this.state.c.forename,placeholder:"Forename"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"FirstName"},"Surname:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("surname",t.target.value)},type:"text",className:"form-control",value:this.state.c.surname,placeholder:"Surname"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-3 control-label",htmlFor:"Email"},"Swim:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{onChange:function(t){return e.update("swim",t.target.value)},type:"text",className:"form-control",value:this.state.c.swim,placeholder:"Swim"})))));return r.a.createElement(h,{y:this.props.y,save:function(){return e.props.save(e.state.c)},title:"Update Details",body:t,close:this.props.close})}}]),t}(n.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"select",value:""},"select"),r.a.createElement("option",{key:"s"},"Tristars Start"),r.a.createElement("option",{key:"1"},"Tristars 1"),r.a.createElement("option",{key:"2"},"Tristars 2"),r.a.createElement("option",{key:"3"},"Tristars 3"),r.a.createElement("option",{key:"4"},"Youths"),r.a.createElement("option",{key:"5"},"Adult")];return Object.keys(this.props.groups).sort(function(e,t){return e.localeCompare(t)}).forEach(function(t){return e.push(r.a.createElement("option",{key:t},t))}),r.a.createElement("select",{type:"button",className:"form-control",value:this.props.ageGroup?this.props.ageGroup:"",onChange:this.props.onChange},e)}}]),t}(n.Component),X=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("option",{key:"?"},"?"),r.a.createElement("option",{key:"M"},"M"),r.a.createElement("option",{key:"F"},"F")];return r.a.createElement("select",{type:"button",className:"form-control",value:this.props.mf?this.props.mf:"?",onChange:this.props.onChange},e)}}]),t}(n.Component),$=z,K=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=["Adult","Tristars Start","Tristars 1","Tristars 2","Tristars 3","Youths"],t=["6:10","8:00"],a=["9:30","11:00"],n=["6:15","8:15"],l=["10:30","11:30"],s={a:["6:40","6:55","7:10","7:30","7:50","8:15"],j:["11:10","11:20","11:40","12:10","12:40"]};return r.a.createElement("div",null,r.a.createElement("h2",null,"Details"),r.a.createElement("p",null,"The adult race includes a 400m pool based swim (17 lengths at ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.everyoneactive.com/centre/hatch-end-swimming-pool/"},"Hatch End swimming pool"),") followed by a 17km road based cycle (3 laps) and an off-road 3km run (3 laps at Hatch End playing fields). Junior races cycle on the playing fields rather than the roads with age-appropriate adjustments to distances (see table below)."),r.a.createElement("p",null,"Documents:"," ",r.a.createElement("a",{target:"_blank",href:"/docs/AdultBriefing.pdf"},"Adult Race Briefing"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/JuniorBriefing.pdf"},"Junior Race Briefing"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/AdultCycleMap.pdf"},"Adult Cycle Course"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/AdultRunCourse.pdf"},"Adult Run Course"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/JuniorRaceCourses.pdf"},"Junior Cycle & Run Courses")),r.a.createElement("p",null,"See also: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.jetstreamtri.com"},"Jetstream"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/NoviceGuide.pdf"},"Novice Guide"),","," ",r.a.createElement("a",{target:"_blank",href:"/docs/SiteMap.pdf"},"Site Map"),","," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.co.uk/maps/place/HA5+4EA"},"Local Map"),","," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.britishtriathlon.org/britain/documents/events/competition-rules/british-triathlon-competition-rules-2019.pdf"},"British Triathlon Rules")),r.a.createElement("h2",null,"Provisional Timings"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),e.map(function(e){return r.a.createElement("th",{style:{textAlign:"center"},key:e},e)}))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Registration"),r.a.createElement("td",{style:{textAlign:"center"}},t[0],"-",t[1]),r.a.createElement("td",{style:{textAlign:"center"},colSpan:e.length-1},a[0],"-",a[1])),r.a.createElement("tr",null,r.a.createElement("th",null,"Transition"),r.a.createElement("td",{style:{textAlign:"center"}},n[0],"-",n[1]),r.a.createElement("td",{style:{textAlign:"center"},colSpan:e.length-1},l[0],"-",l[1])),r.a.createElement("tr",null,r.a.createElement("th",null,"Briefing"),r.a.createElement("td",{style:{textAlign:"center"}},s.a.join(", ")),s.j.map(function(e){return r.a.createElement("td",{style:{textAlign:"center"},key:e},e)})),r.a.createElement("tr",null,r.a.createElement("th",null,"Start"),["7:00*","11:30","11:40","12:00","12:30","13:00"].map(function(e){return r.a.createElement("td",{style:{textAlign:"center"},key:e},e)})))),r.a.createElement("div",null,r.a.createElement("b",null,"*Individual adult start times")," are calculated from ",r.a.createElement("b",null,"estimated swim time")," and notified one week before the race."),r.a.createElement("h2",null,"Race Distances"),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"Age at 31/12/19"),r.a.createElement("th",{className:"text-center"},"Swim(lengths)"),r.a.createElement("th",{className:"text-center"},"Bike(laps)"),r.a.createElement("th",{className:"text-center"},"Run(laps)"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Adult - novice"),r.a.createElement("td",null,"400m(17)"),r.a.createElement("td",null,"17km(3)"),r.a.createElement("td",null,"3km(3)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Adult - experienced"),r.a.createElement("td",null,"400m(17)"),r.a.createElement("td",null,"17km(3)"),r.a.createElement("td",null,"3km(3)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Youths: 15-16 yrs"),r.a.createElement("td",null,"400m(17)"),r.a.createElement("td",null,"5km(5)"),r.a.createElement("td",null,"3km(5)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristar 3: 13-14 yrs"),r.a.createElement("td",null,"306m(13)"),r.a.createElement("td",null,"4km(4)"),r.a.createElement("td",null,"2.4km(4)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristar 2: 11-12 yrs"),r.a.createElement("td",null,"212m(9)"),r.a.createElement("td",null,"3km(3)"),r.a.createElement("td",null,"1.8km(3)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristar 1:  9-10 yrs"),r.a.createElement("td",null,"165m(7)"),r.a.createElement("td",null,"2km(2)"),r.a.createElement("td",null,"1.2km(2)")),r.a.createElement("tr",null,r.a.createElement("td",null,"Tristart:   8 yrs"),r.a.createElement("td",null,"70m(3)"),r.a.createElement("td",null,"1km(1)"),r.a.createElement("td",null,"0.6km(1)")))))}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",year:"",cat:"",mf:"",n:"",sort:"Total"},a.cnum=function(e){var t={TS:1,T1:2,T2:3,T3:4,Y:5},n=t[e[a.c.Cat]]?t[e[a.c.Cat]]:6;return a.year<2004&n<5&&(n=4),n},a.ts=function(e){var t=a.c[a.state.sort]?e[a.c[a.state.sort]]:e[a.c.Total];if(!t)return 9999999;var n=t.split(":"),r=Object(H.a)(n,3),l=r[0],s=r[1],o=r[2],c=3600*l+60*s+1*o;return l&&s&&o||console.log("ts",e,l,s,o),c},a.compare=function(e,t){var n;return 0===(n=a.cnum(e)-a.cnum(t))&&(n=a.ts(e)-a.ts(t)),n},a.filter=function(e){for(var t,n,r=[],l=a.cols(e),s=1;s<k.results[e].length;s++){var o=k.results[e][s];(!o||a.state.year&&a.state.year!==e||a.state.mf&&a.state.mf!==o[l.MF]||a.state.cat&&-1===a.state.cat.indexOf("*")&&a.state.cat!==o[l.Cat]&&"Adult"!==a.state.cat&&"Junior"!==a.state.cat||"T*"===a.state.cat&&"T"!==o[l.Cat][0]||"Y*"===a.state.cat&&"Y"!==o[l.Cat][0]||"S*"===a.state.cat&&"S"!==o[l.Cat][0]||"V*"===a.state.cat&&"V"!==o[l.Cat][0]||"Adult"===a.state.cat&&"S"!==o[l.Cat][0]&&"V"!==o[l.Cat][0]||"Junior"===a.state.cat&&("S"===o[l.Cat][0]||"V"===o[l.Cat][0]))&&(o=!1),o&&r.push(o)}a.year=e,a.c=l,r=r.sort(a.compare);var c=[];return r.forEach(function(e){var r=null;a.cnum(e)!==n?t=1:t++,"DNF"!==e[l.Pos]&&(e[l.Pos]=t),n=a.cnum(e),""===a.state.name&&""===a.state.year&&""===a.state.cat&&""===a.state.mf&&""===a.state.n?r=1*e[l.Pos]===1?e:null:a.state.name?a.state.name.toLowerCase().split(",").forEach(function(t){t.length>0&&-1!==e[l.Name].toLowerCase().indexOf(t)&&(r=e),l.Club&&t.length>0&&-1!==e[l.Club].toLowerCase().indexOf(t)&&(r=e)}):r=a.state.n?1*e[l.Pos]<=a.state.n?e:null:e,r&&c.push(r)}),c},a.set=function(e,t){var n=a.state;n[e]=t.target?t.target.value:t,a.setState(n)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.het.get_results()}},{key:"cols",value:function(e){var t={},a=0;return k.results[e][0].forEach(function(e){t[e]=a++}),t}},{key:"render",value:function(){var e=this;if(console.log("renderResults",k.results),!k.results)return null;var t=0,a=0;return r.a.createElement("div",null,r.a.createElement("form",{className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement(Q,{nm:this.state.name,set:this.set}),r.a.createElement(ae,{year:this.state.year,set:this.set}),r.a.createElement(ee,{mf:this.state.mf,set:this.set}),r.a.createElement(te,{cat:this.state.cat,set:this.set}),r.a.createElement(ne,{n:this.state.n,set:this.set}))),Object.keys(this.props.het.results).reverse().map(function(n){var l=e.cols(n),s=a<100?e.filter(n):[];return a+=s.length,s.length>0?r.a.createElement("div",{key:t++},r.a.createElement("h3",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.set("year",e.state.year===n?"":n)}},n)),r.a.createElement("table",{className:"table table-bordered table-condensed table-striped width-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Pos"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"M/F"),r.a.createElement("th",null,"Cat"),r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Total"})}},"Total "),"Total"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Swim"})}},"Swim "),"Swim"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),l.T1?r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"T1"})}},"T1 "),"T1"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null):null,r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Bike"})}},"Bike "),"Bike"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),l.T2?r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"T2"})}},"T2 "),"T2"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null):null,r.a.createElement("th",null,r.a.createElement("span",{className:"btn-link",onClick:function(){return e.setState({sort:"Run"})}},"Run "),"Run"===e.state.sort?r.a.createElement("i",{className:"fa fa-sort"}):null),l.Club?r.a.createElement("th",null,"Club"):null)),r.a.createElement("tbody",null,s.map(function(e){return r.a.createElement("tr",{key:t++},r.a.createElement("td",null,e[l.Pos]),r.a.createElement("td",null,e[l.Name]),r.a.createElement("td",null,e[l.MF]),r.a.createElement("td",null,e[l.Cat]),r.a.createElement("td",null,e[l.Total]),r.a.createElement("td",null,e[l.Swim]),l.T1?r.a.createElement("td",null,e[l.T1]):null,r.a.createElement("td",null,e[l.Bike]),l.T2?r.a.createElement("td",null,e[l.T2]):null,r.a.createElement("td",null,e[l.Run]),l.Club?r.a.createElement("td",null,e[l.Club]):null)})))):null}))}}]),t}(n.Component),Q=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-4 col-xs-8"},r.a.createElement("input",{type:"text",size:"10",placeholder:"Name, ...",value:this.props.nm,className:"form-control",onChange:function(t){return e.props.set("name",t)}}))}}]),t}(n.Component),ee=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.mf,onChange:function(t){return e.props.set("mf",t)}},r.a.createElement("option",{value:""},"M/F"),r.a.createElement("option",{value:"M"},"M"),r.a.createElement("option",{value:"F"},"F")))}}]),t}(n.Component),te=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.cat,onChange:function(t){return e.props.set("cat",t)}},r.a.createElement("option",{value:""},"Cat"),["Junior","TS","T1","T2","T3","Y","Adult","S*","SY","S1","S2","S3","S4","V*","V1","V2","V3","V4"].map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(n.Component),ae=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.year,onChange:function(t){return e.props.set("year",t)}},r.a.createElement("option",{value:""},"Year"),["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2017","2018"].reverse().map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(n.Component),ne=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-sm-2 col-xs-4"},r.a.createElement("select",{className:"form-control",value:this.props.n,onChange:function(t){return e.props.set("n",t)}},r.a.createElement("option",{value:""},"#"),[1,3,5,10,20].map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))}}]),t}(n.Component),re=Z,le=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e));var n=k.serviceWorker(Object(d.a)(Object(d.a)(a)),!1);return a.state={nav:a.props.page,het:n},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this;switch(this.state.nav){case"volunteers":e=r.a.createElement(L,{het:this.state.het});break;case"details":e=r.a.createElement(K,null);break;case"results":e=r.a.createElement(re,{het:this.state.het});break;case"competitors":e=r.a.createElement($,{het:this.state.het});break;default:e=r.a.createElement(K,{het:this.state.het})}return"Labels"===this.state.nav?r.a.createElement("div",null,e):r.a.createElement("div",null,this.props.nav?r.a.createElement(se,{nav:function(e){return t.setState({nav:e})},page:this.state.nav,het:this.state.het}):null,this.state.message?r.a.createElement("div",{className:"alert alert-dismissible alert-"+this.state.message.type},r.a.createElement("button",{type:"button",className:"close",onClick:function(){return t.setState({message:null})},"data-dismiss":"alert"},"\xd7"),r.a.createElement("strong",null,this.state.message.text)):null,r.a.createElement("div",{id:"page",className:"container"},e))}}]),t}(n.Component),se=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,in:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({open:!1,in:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar navbar-default"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("button",{type:"button",className:"navbar-toggle collapsed",onClick:function(){e.setState({in:!e.state.in})}},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"})),r.a.createElement("a",{href:"http://www.hatchendtri.com/",className:"navbar-brand"},"Hatch End Triathlon")),r.a.createElement("div",{className:this.state.in?"collapse navbar-collapse in":"collapse navbar-collapse"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.props.nav("volunteers")}},"Volunteers")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.props.nav("details")}},"Details")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.props.nav("results")}},"Results")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:function(){return e.props.nav("competitors")}},"Competitors")),null),null)))}}]),t}(n.Component),oe=le,ce=(a(42),null),ie=null,ue=!1;(ce=document.getElementById("HE_root"))?(ie="volunteers",ue=!0):(ce=document.getElementById("HE_volunteers"))?ie="volunteers":(ce=document.getElementById("HE_competitors"))?ie="competitors":(ce=document.getElementById("HE_results"))?ie="results":(ce=document.getElementById("HE_details"))&&(ie="details"),ce&&s.a.render(r.a.createElement(oe,{page:ie,nav:ue}),ce),N()}},[[22,2,1]]]);
//# sourceMappingURL=main.66efa447.chunk.js.map